{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js!/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/order/install.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/order/install.vue","mtime":1587402564000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/liangzexiang/WebstormProjects/ays/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _interopRequireWildcard2 = _interopRequireDefault(require(\"/Users/liangzexiang/WebstormProjects/ays/node_modules/@babel/runtime-corejs2/helpers/interopRequireWildcard\"));\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"/Users/liangzexiang/WebstormProjects/ays/node_modules/@babel/runtime-corejs2/helpers/objectSpread2\"));\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nvar _order = require(\"@/api/order\");\n\nvar _waves = _interopRequireDefault(require(\"@/directive/waves\"));\n\nvar _utils = require(\"@/utils\");\n\nvar _vuex = require(\"vuex\");\n\nvar _sendOrder = _interopRequireDefault(require(\"./install/sendOrder\"));\n\nvar _addOrder = _interopRequireDefault(require(\"./install/addOrder\"));\n\nvar _OrderInfo = _interopRequireDefault(require(\"./install/OrderInfo\"));\n\nvar _city = require(\"@/api/city\");\n\nvar _tools = require(\"@/api/tools\");\n\nvar _ecshop = require(\"@/api/ecshop\");\n\nvar _shop = require(\"@/api/shop\");\n\nvar _product = require(\"@/api/product\");\n\nvar _salesman = require(\"@/api/salesman\");\n\nvar _admin = require(\"@/api/admin\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar app0;\nvar _default = {\n  name: 'Roles',\n  // components: { rolesForm },\n  directives: {\n    waves: _waves.default\n  },\n  components: {\n    sendOrder: _sendOrder.default,\n    OrderInfo: _OrderInfo.default,\n    addOrder: _addOrder.default\n  },\n  filters: {\n    statusFilter: function statusFilter(status) {\n      var statusMap = {\n        0: '禁用',\n        1: '正常'\n      };\n      return statusMap[status];\n    },\n    nFormatter: function nFormatter(num) {\n      var digits = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n      var si = [{\n        value: 1,\n        symbol: ''\n      }, // { value: 1e3, symbol: \"K\" },\n      {\n        value: 1e6,\n        symbol: 'M'\n      }, {\n        value: 1e9,\n        symbol: 'G'\n      }, {\n        value: 1e12,\n        symbol: 'T'\n      }, {\n        value: 1e15,\n        symbol: 'P'\n      }, {\n        value: 1e18,\n        symbol: 'E'\n      }];\n      var rx = /\\.0+$|(\\.[0-9]*[1-9])0+$/;\n      var i;\n\n      for (i = si.length - 1; i > 0; i--) {\n        if (num >= si[i].value) {\n          break;\n        }\n      }\n\n      return (num / si[i].value).toFixed(digits).replace(rx, '$1') + si[i].symbol;\n    }\n  },\n  data: function data() {\n    return {\n      props: {\n        lazy: true,\n        lazyLoad: function lazyLoad(node, resolve) {\n          var level = node.level;\n\n          if (level === 0) {\n            (0, _tools.getBrand)().then(function (res) {\n              var data = res.data;\n              var nodes = [];\n\n              for (var i = 0; i < data.length; i++) {\n                nodes.push({\n                  label: data[i].name,\n                  value: data[i].brandid\n                });\n              }\n\n              resolve(nodes);\n            }); // 通过调用resolve将子节点数据返回，通知组件数据加载完成\n          }\n\n          if (level === 1) {\n            (0, _tools.getSeries)(node.data.value).then(function (res) {\n              var data = res.data;\n              var nodes = [];\n\n              for (var i = 0; i < data.length; i++) {\n                nodes.push({\n                  label: data[i].factory_name + ' ' + data[i].series_name,\n                  value: data[i].series_id\n                });\n              }\n\n              resolve(nodes);\n            }); // 通过调用resolve将子节点数据返回，通知组件数据加载完成\n          }\n\n          if (level === 2) {\n            (0, _tools.getModel)(node.data.value).then(function (res) {\n              var data = res.data;\n              var nodes = [];\n\n              for (var i = 0; i < data.length; i++) {\n                nodes.push({\n                  label: data[i].label,\n                  value: data[i].value,\n                  leaf: level >= 2\n                });\n              }\n\n              resolve(nodes);\n            }); // 通过调用resolve将子节点数据返回，通知组件数据加载完成\n          }\n\n          if (level === 3) {\n            var nodes = [];\n            resolve(nodes);\n          }\n        }\n      },\n      isIndeterminate: false,\n      checkAll: false,\n      //全选\n      checkedCities: [],\n      multipleSelection: [],\n      checkedGameId: [],\n      //\n      returned: {},\n      evainfo: {},\n      eavVisible: false,\n      loading: true,\n      sumorder: 0,\n      productTree: [],\n      //产品树\n      reTitle: '',\n      reFrom: {\n        role: 2,\n        type: 1\n      },\n      after: [{\n        lable: '已售后',\n        value: 1\n      }, {\n        lable: '未售后',\n        value: 2\n      }],\n      eva: [{\n        lable: '已评价',\n        value: 1\n      }, {\n        lable: '未评价',\n        value: 2\n      }],\n      orderStatus: [{\n        lable: '全部',\n        value: 'all'\n      }, {\n        lable: '待处理',\n        value: 0\n      }, {\n        lable: '待确认(业务)',\n        value: 1\n      }, {\n        lable: '待确认(门店)',\n        value: 2\n      }, {\n        lable: '待安装',\n        value: 3\n      }, {\n        lable: '已安装',\n        value: 4\n      }, {\n        lable: '财审1',\n        value: 5\n      }, {\n        lable: '财审2',\n        value: 6\n      }, {\n        lable: '待结算',\n        value: 7\n      }, {\n        lable: '已结算',\n        value: 8\n      }, {\n        lable: '退货',\n        value: 10\n      }, {\n        lable: '删除',\n        value: 11\n      }],\n      visit: [{\n        lable: '已回访',\n        value: 1\n      }, {\n        lable: '未回访',\n        value: 2\n      }],\n      infodialogVisible: false,\n      //打开详情\n      reOption: [{\n        lable: '客户临时取消安装'\n      }, {\n        lable: '客户不在该城市了'\n      }, {\n        lable: '距离原因客户要求更换门店'\n      }, {\n        lable: '其他原因'\n      }],\n      is_disabled: false,\n      shopQuery: {\n        cityCode: undefined,\n        shopname: undefined,\n        tel: undefined\n      },\n      postFrom: {},\n      permissions: [],\n      //权限组\n      RedialogVisible: false,\n      ReturndialogVisible: false,\n      ReturnData: {\n        type: 1,\n        price: undefined,\n        courier: undefined,\n        courier_order_no: undefined,\n        name: undefined\n      },\n      addVisible: false,\n      innerVisible: false,\n      dialogVisible: false,\n      tableKey: 0,\n      order_id: undefined,\n      CarModellist: [],\n      //车型数据\n      lazada: [],\n      //所有平台\n      salesman: [],\n      //所有业务员\n      device: [],\n      //装置罩\n      carl: [],\n      list: null,\n      total: null,\n      // postFrom: Object.assign({}, defaultForm),\n      cityoptions: [],\n      //地址\n      selectedRows: null,\n      listLoading: true,\n      showSearch: false,\n      BackoffVisible: false,\n      options: [],\n      shop: [],\n      listQuery: {\n        page: 1,\n        limit: 10,\n        status: 'all',\n        title: '',\n        sstatus: 'all'\n      },\n      allsum: 0,\n      countdata: [{\n        total: 1,\n        status: 1\n      }, {\n        total: 1,\n        status: 1\n      }, {\n        total: 1,\n        status: 1\n      }, {\n        total: 1,\n        status: 1\n      }, {\n        total: 1,\n        status: 1\n      }, {\n        total: 1,\n        status: 1\n      }, {\n        total: 1,\n        status: 1\n      }, {\n        total: 1,\n        status: 1\n      }, {\n        total: 1,\n        status: 1\n      }, {\n        total: 1,\n        status: 1\n      }, {\n        total: 1,\n        status: 1\n      }, {\n        total: 1,\n        status: 1\n      }],\n      tabtext: 'install',\n      buttonDisabled: true,\n      deleting: false,\n      pickerOptions: _utils.pickerOptions,\n      currentIndex: -1,\n      regionHiera: [],\n      Stitle: '',\n      adminll: []\n    };\n  },\n  computed: (0, _objectSpread2.default)({}, (0, _vuex.mapGetters)(['userinfo', 'brand', 'group'])),\n  watch: {},\n  created: function created() {\n    var _this2 = this;\n\n    (0, _admin.adminall)().then(function (res) {\n      _this2.adminll = res.data;\n    });\n    this.permissions = this.group.btn.split(',');\n    this.fetchList();\n    (0, _city.Citylist)().then(function (res) {\n      _this2.cityoptions = res.data;\n    });\n    (0, _ecshop.GetecshopByList)().then(function (res) {\n      _this2.lazada = res.data;\n    });\n    console.log(this.userinfo); //产品树\n\n    (0, _product.GetProductByTree)().then(function (res) {\n      _this2.productTree = res.data;\n    }); // GetDataByShopAll().then(res => {\n    //   this.shop = res.data\n    // })\n\n    (0, _salesman.GetSaleByAll)().then(function (res) {\n      _this2.salesman = res.data;\n    });\n  },\n  methods: {\n    elCascaderOnlick: function elCascaderOnlick() {\n      var that = this;\n      setTimeout(function () {\n        document.querySelectorAll('.el-cascader-node__label').forEach(function (el) {\n          el.onclick = function () {\n            this.previousElementSibling.click();\n            that.$refs.elcascader.dropDownVisible = false;\n          };\n        });\n        document.querySelectorAll('.el-cascader-panel .el-radio').forEach(function (el) {\n          el.onclick = function () {\n            that.$refs.elcascader.dropDownVisible = false;\n          };\n        });\n      }, 100);\n    },\n    elCascaderproduct: function elCascaderproduct() {\n      var that = this;\n      setTimeout(function () {\n        document.querySelectorAll('.el-cascader-node__label').forEach(function (el) {\n          el.onclick = function () {\n            this.previousElementSibling.click();\n            that.$refs.product.dropDownVisible = false;\n          };\n        });\n        document.querySelectorAll('.el-cascader-panel .el-radio').forEach(function (el) {\n          el.onclick = function () {\n            that.$refs.product.dropDownVisible = false;\n          };\n        });\n      }, 100);\n    },\n    elCascaderCar: function elCascaderCar() {\n      var that = this;\n      setTimeout(function () {\n        document.querySelectorAll('.el-cascader-node__label').forEach(function (el) {\n          el.onclick = function () {\n            this.previousElementSibling.click();\n            that.$refs.car.dropDownVisible = false;\n          };\n        });\n        document.querySelectorAll('.el-cascader-panel .el-radio').forEach(function (el) {\n          el.onclick = function () {\n            that.$refs.car.dropDownVisible = false;\n          };\n        });\n      }, 100);\n    },\n    headGain: function headGain() {\n      console.log(this.checkedCities, '获取id');\n    },\n    //监听全选\n    handleCheckAllChange: function handleCheckAllChange(val) {\n      this.checkedCities = val ? this.checkedGameId : [];\n      this.isIndeterminate = false;\n\n      if (this.checkAll) {\n        console.log('全选');\n      } else {\n        console.log('未全选');\n      }\n    },\n    //监听单选\n    handleCheckedCitiesChange: function handleCheckedCitiesChange(value) {\n      var checkedCount = value.length;\n      this.checkAll = checkedCount === this.checkedGameId.length;\n      this.isIndeterminate = checkedCount > 0 && checkedCount < this.checkedGameId.length;\n    },\n    handleBackoff: function handleBackoff(item) {\n      this.returned = item.returned;\n      this.BackoffVisible = !this.BackoffVisible;\n    },\n    handlecancel: function handlecancel() {\n      this.eavVisible = false;\n    },\n    handelEva: function handelEva(row) {\n      this.evainfo = {};\n      this.evainfo = row.eva;\n\n      if (row.eva.img.constructor === String) {\n        this.evainfo.img = row.eva.img.split(',');\n      }\n\n      this.eavVisible = true;\n      this.reTitle = row.id + '-' + '车主评价';\n    },\n    handeReturn: function handeReturn() {\n      var _this3 = this;\n\n      // this.$message('暂未编写退货逻辑')\n      this.ReturnData.order_id = this.order_id;\n      this.ReturnData.tocontent = this.userinfo.realName + ' 退货订单';\n      (0, _order.PostReturnedByAdd)(this.ReturnData).then(function (res) {\n        _this3.$message.success('退货成功');\n\n        _this3.ReturndialogVisible = !_this3.ReturndialogVisible;\n\n        _this3.fetchList();\n      });\n    },\n    //导出数据\n    handleDownload: function handleDownload() {\n      var _this4 = this;\n\n      this.listLoading = true;\n      (0, _order.GetQueryBydownload)(this.listQuery).then(function (res) {\n        Promise.resolve().then(function () {\n          return (0, _interopRequireWildcard2.default)(require('@/vendor/Export2Excel'));\n        }).then(function (excel) {\n          console.log(excel);\n          var tHeader = res.data.tHeader;\n          var filterVal = res.data.filterVal;\n\n          var data = _this4.formatJson(res.data.data, filterVal);\n\n          var day2 = new Date();\n          day2.setTime(day2.getTime());\n          var s2 = day2.getFullYear() + '-' + (day2.getMonth() + 1) + '-' + day2.getDate();\n          excel.export_json_to_excel({\n            header: tHeader,\n            data: data,\n            filename: '安装单-' + s2\n          });\n          _this4.listLoading = false;\n\n          _this4.$message.success('下载成功');\n        });\n      });\n    },\n    formatJson: function formatJson(data, filterVal) {\n      return data.map(function (v) {\n        return filterVal.map(function (j) {\n          if (j === 'timestamp') {\n            return parseTime(v[j]);\n          } else {\n            return v[j];\n          }\n        });\n      });\n    },\n    handleReturn: function handleReturn(row) {\n      this.ReturndialogVisible = !this.ReturndialogVisible;\n      this.reFrom.rejected = row.status;\n      this.reTitle = row.id + ' ' + '退货操作';\n      this.order_id = row.id;\n    },\n    handleRe: function handleRe() {\n      this.RedialogVisible = !this.RedialogVisible;\n    },\n    rolesbtn: function rolesbtn(val) {\n      var index = this.permissions.indexOf(val);\n\n      if (index > -1) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    handeldownload: function handeldownload() {\n      this.$message('暂无导出');\n    },\n    handelInfoDialog: function handelInfoDialog() {\n      this.infodialogVisible = !this.infodialogVisible;\n    },\n    //打开详情\n    handelInfo: function handelInfo(row, type) {\n      this.tabtext = type;\n      console.log(type);\n      this.postFrom = row;\n\n      if (row.city_code !== null) {\n        if (row.city_code.constructor === String) {\n          this.postFrom.city_code = this.postFrom.city_code.split(',');\n        }\n      }\n\n      if (row.car_model !== null) {\n        if (row.car_model.constructor === String) {\n          this.postFrom.car_model = this.postFrom.car_model.split(',');\n        }\n      }\n\n      if (row.lazada_list !== null) {\n        if (row.lazada_list.constructor === String) {\n          this.postFrom.lazada_list = this.postFrom.lazada_list.split(',');\n        }\n\n        var lazada = this.postFrom.lazada_list;\n        this.postFrom.lazada_list = [];\n\n        for (var i = 0; i < lazada.length; i++) {\n          this.postFrom.lazada_list.push(parseInt(lazada[i]));\n        }\n      }\n\n      this.infodialogVisible = !this.infodialogVisible;\n    },\n    handelPostRe: function handelPostRe() {\n      var _this5 = this;\n\n      this.reFrom.admin_id = this.userinfo.id;\n      this.reFrom.tocontent = '  ' + this.userinfo.realName + '驳回订单,' + '原因' + this.reFrom.content;\n      (0, _order.PostNoteByAdd)(this.reFrom).then(function (res) {\n        _this5.fetchList();\n\n        _this5.$message.success('驳回成功');\n\n        _this5.RedialogVisible = !_this5.RedialogVisible;\n      });\n    },\n    //驳回\n    handelRejected: function handelRejected(row) {\n      console.log(row);\n      var type = row.status;\n      this.reTitle = '驳回原因';\n      this.RedialogVisible = !this.RedialogVisible;\n      this.reFrom.order_id = row.id;\n      this.reFrom.status = row.status;\n      this.reFrom.model_title = row.model_title;\n      this.reFrom.product_titile = row.product_titile;\n      this.reFrom.rejected = row.status;\n\n      if (row.shop) {\n        this.reFrom.shopname = row.shop.shopname;\n      }\n\n      this.reFrom.admin_name = this.userinfo.realName;\n      this.reFrom.openid = row.openid;\n      this.reFrom.salesman_id = row.salesman_id;\n      this.reFrom.pre_sales = row.pre_sales;\n      this.reTitle = row.id + '-' + row.status + ' ' + '驳回原因';\n      var option = [];\n\n      if (type === '待确认(业务)') {\n        option = [{\n          lable: '安装费错误'\n        }, {\n          lable: '选错业务员'\n        }, {\n          lable: '客户原因导致驳回'\n        }, {\n          lable: '选错门店'\n        }];\n      }\n\n      if (type === '待确认(门店)') {\n        option = [{\n          lable: '客户临时取消安装'\n        }, {\n          lable: '客户不在该城市了'\n        }, {\n          lable: '距离原因客户要求更换门店'\n        }, {\n          lable: '其他原因'\n        }];\n      }\n\n      if (type === '待安装') {\n        option = [{\n          lable: '客户临时取消安装'\n        }, {\n          lable: '客户不在该城市了'\n        }, {\n          lable: '距离原因客户要求更换门店'\n        }, {\n          lable: '其他原因'\n        }];\n      }\n\n      if (type === '已安装') {\n        option = [{\n          lable: '未安装'\n        }, {\n          lable: '其他原因'\n        }];\n      }\n\n      if (type === '财审1' || type === '财审2' || type === '待结算') {\n        option = [{\n          lable: '查无此单'\n        }, {\n          lable: '其他原因'\n        }];\n      }\n\n      this.reOption = option;\n    },\n    //所选门店\n    fetchList: function fetchList() {\n      var _this6 = this;\n\n      this.listLoading = true;\n      (0, _order.GetDataByList)(this.listQuery).then(function (response) {\n        _this6.list = response.data.data;\n\n        for (var i = 0; i < _this6.list.length; i++) {\n          _this6.checkedGameId.push(_this6.list[i].id);\n\n          _this6.multipleSelection = _this6.checkedGameId;\n        }\n\n        _this6.total = response.data.total;\n        var countdata = response.data.countdata;\n        var temp = [];\n        var allsum = 0;\n\n        for (var _i = 0; _i < 13; _i++) {\n          temp.push({\n            total: 0,\n            status: _i\n          });\n        }\n\n        for (var _i2 = 0; _i2 < countdata.length; _i2++) {\n          allsum = allsum + countdata[_i2].total;\n          temp[countdata[_i2].status].total = countdata[_i2].total;\n\n          if (countdata[_i2].status === 9) {\n            if (temp[0].total === 0) {\n              temp[0].total = countdata[_i2].total;\n            } else {\n              temp[0].total = temp[0].total + countdata[_i2].total;\n            }\n          }\n        }\n\n        _this6.listLoading = !_this6.listLoading;\n        _this6.allsum = allsum;\n        _this6.countdata = temp;\n        _this6.listLoading = false;\n      });\n    },\n    handleFilter: function handleFilter() {\n      this.listQuery.page = 1;\n      this.fetchList();\n    },\n    handleFilterClear: function handleFilterClear() {\n      this.listQuery = {\n        page: 1,\n        psize: 10,\n        status: '-1',\n        title: ''\n      };\n      this.fetchList();\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.listQuery.psize = val;\n      this.fetchList();\n    },\n    handleStatusChange: function handleStatusChange(val) {\n      this.listQuery.page = 1;\n      this.listQuery.sstatus = val;\n      this.fetchList();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.listQuery.page = val;\n      this.fetchList();\n    },\n    handleModifyStatus: function handleModifyStatus(index, id, status) {\n      this.list[index]['status'] = 1 - status;\n      (0, _order.change)(id, 'status', 1 - status).then(function (response) {});\n    },\n    handleSelectionChange: function handleSelectionChange(val) {\n      if (val.length > 0) {\n        this.buttonDisabled = false;\n      } else {\n        this.buttonDisabled = true;\n      }\n\n      this.selectedRows = val;\n    },\n    handleCreate: function handleCreate() {\n      this.postFrom = {};\n      this.postFrom.status = '新增';\n      this.Stitle = '新增' + '操作';\n      this.is_disabled = false;\n      this.addVisible = true;\n    },\n    handleUpdate: function handleUpdate(row) {\n      this.postFrom = {};\n      this.postFrom = row;\n\n      if (row.city_code.constructor === String) {\n        this.postFrom.city_code = this.postFrom.city_code.split(',');\n      }\n\n      if (row.car_model !== null) {\n        if (row.car_model.constructor === String) {\n          this.postFrom.car_model = this.postFrom.car_model.split(',');\n        }\n      }\n\n      if (row.buy_product_id !== null) {\n        if (row.buy_product_id.constructor === String) {\n          var arr = [];\n          var temp = this.postFrom.buy_product_id.split(',');\n\n          for (var i = 0; i < temp.length; i++) {\n            arr.push(parseInt(temp[i]));\n          }\n\n          this.postFrom.buy_product_id = arr;\n        }\n      }\n\n      if (row.lazada_list !== null) {\n        if (row.lazada_list.constructor === String) {\n          this.postFrom.lazada_list = this.postFrom.lazada_list.split(',');\n        }\n\n        var lazada = this.postFrom.lazada_list;\n        this.postFrom.lazada_list = [];\n\n        for (var _i3 = 0; _i3 < lazada.length; _i3++) {\n          this.postFrom.lazada_list.push(parseInt(lazada[_i3]));\n        }\n      }\n\n      this.is_disabled = false;\n\n      if (this.postFrom.status === '驳回') {\n        this.postFrom.status = '重新派单';\n      }\n\n      this.Stitle = this.postFrom.id + '-' + this.postFrom.status + '操作';\n      this.dialogVisible = true;\n    },\n    handleEdit: function handleEdit(row) {\n      this.postFrom = {};\n      this.postFrom = row;\n\n      if (row.city_code.constructor === String) {\n        this.postFrom.city_code = this.postFrom.city_code.split(',');\n      }\n\n      if (row.car_model !== null) {\n        if (row.car_model.constructor === String) {\n          this.postFrom.car_model = this.postFrom.car_model.split(',');\n        }\n      }\n\n      if (row.buy_product_id !== null) {\n        if (row.buy_product_id.constructor === String) {\n          var arr = [];\n          var temp = this.postFrom.buy_product_id.split(',');\n\n          for (var i = 0; i < temp.length; i++) {\n            arr.push(parseInt(temp[i]));\n          }\n\n          this.postFrom.buy_product_id = arr;\n        }\n      }\n\n      if (row.lazada_list !== null) {\n        if (row.lazada_list.constructor === String) {\n          this.postFrom.lazada_list = this.postFrom.lazada_list.split(',');\n        }\n\n        var lazada = this.postFrom.lazada_list;\n        this.postFrom.lazada_list = [];\n\n        for (var _i4 = 0; _i4 < lazada.length; _i4++) {\n          this.postFrom.lazada_list.push(parseInt(lazada[_i4]));\n        }\n      }\n\n      this.is_disabled = false;\n\n      if (this.postFrom.status === '驳回') {\n        this.postFrom.status = '重新派单';\n      }\n\n      this.postFrom.status = '修改';\n      this.Stitle = '修改操作';\n      this.dialogVisible = !this.dialogVisible;\n    },\n    handleClose: function handleClose() {\n      this.dialogVisible = false;\n      this.addVisible = false;\n      this.fetchList();\n    },\n    handleSend: function handleSend(row, status) {\n      this.postFrom = row;\n\n      if (row.city_code !== null) {\n        if (row.city_code.constructor === String) {\n          this.postFrom.city_code = this.postFrom.city_code.split(',');\n        }\n      }\n\n      if (row.city_code.constructor === String) {\n        this.postFrom.city_code = this.postFrom.city_code.split(',');\n      }\n\n      if (row.buy_product_id.constructor === String) {\n        var arr = [];\n        var temp = this.postFrom.buy_product_id.split(',');\n\n        for (var i = 0; i < temp.length; i++) {\n          arr.push(parseInt(temp[i]));\n        }\n\n        this.postFrom.buy_product_id = arr;\n      }\n\n      if (row.car_model.constructor === String) {\n        this.postFrom.car_model = this.postFrom.car_model.split(',');\n      }\n\n      console.log(row.lazada_list);\n\n      if (row.lazada_list.constructor === String) {\n        this.postFrom.lazada_list = this.postFrom.lazada_list.split(',');\n      }\n\n      var lazada = this.postFrom.lazada_list;\n      this.postFrom.lazada_list = [];\n\n      for (var _i5 = 0; _i5 < lazada.length; _i5++) {\n        this.postFrom.lazada_list.push(parseInt(lazada[_i5]));\n      }\n\n      this.dialogVisible = !this.dialogVisible;\n      this.Stitle = this.postFrom.id + ' ';\n\n      if (status === 2) {\n        this.Stitle = this.Stitle + '同意派单操作';\n      }\n\n      if (status === 3) {\n        this.Stitle = this.Stitle + '同意接单操作';\n      }\n\n      if (status === 4) {\n        this.Stitle = this.Stitle + '完成安装操作';\n      }\n\n      if (status === 5) {\n        this.Stitle = this.Stitle + '确认完成操作';\n      }\n\n      if (status === 6) {\n        this.Stitle = this.Stitle + '财审1审核通过操作';\n      }\n\n      if (status === 7) {\n        this.Stitle = this.Stitle + '财审审核通过操作';\n      }\n\n      if (status === 8) {\n        this.Stitle = this.Stitle + '-' + '结算操作';\n      }\n\n      this.is_disabled = true;\n    },\n    updateRow: function updateRow() {\n      var _this7 = this;\n\n      this.postFrom.city_code = this.postFrom.city_code.join(',');\n      this.postFrom.car_model = this.postFrom.car_model.join(',');\n      (0, _order.PostDataByAdd)(this.postFrom).then(function (res) {\n        _this7.postFrom = Object.assign({}, defaultForm);\n        _this7.dialogVisible = !_this7.dialogVisible;\n      });\n    },\n    handleDelete: function handleDelete(index, id) {\n      var _this8 = this;\n\n      var _this = this;\n\n      this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this.$set(_this.list[index], 'delete', true);\n\n        var temp = {\n          tocontent: _this8.userinfo.realName + '删除订单',\n          id: id\n        };\n        (0, _order.del)(temp).then(function (response) {\n          if (response.status === 1) {\n            _this.list.splice(index, 1);\n\n            _this.total = _this.total - 1;\n\n            _this.$notify.success(response.msg);\n\n            _this8.fetchList();\n          } else {\n            _this.$notify.error(response.msg);\n          }\n\n          _this8.$message.success('删除成功');\n\n          _this.$set(_this.list[index], 'delete', false);\n        }).catch(function (error) {\n          _this.$set(_this.list[index], 'delete', false);\n        });\n      }).catch(function () {\n        _this8.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n    handleDeleteAll: function handleDeleteAll() {\n      var _this9 = this;\n\n      var _this = this;\n\n      if (this.selectedRows.length > 0) {\n        this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(function () {\n          _this.deleting = true;\n          var ids = (0, _utils.getArrByKey)(_this.selectedRows, 'id');\n          var idstr = ids.join(',');\n          (0, _order.delAll)({\n            ids: idstr\n          }).then(function (response) {\n            if (response.status === 1) {\n              var delindex = [];\n\n              _this.list.forEach(function (item, index, input) {\n                if (ids.indexOf(item.id) > -1) {\n                  delindex.push(index);\n                }\n              });\n\n              for (var i = delindex.length - 1; i >= 0; i--) {\n                _this.list.splice(delindex[i], 1);\n              }\n\n              _this.total = _this.total - delindex.length;\n\n              _this.$message.success(response.msg);\n            } else {\n              _this.$message.error(response.msg);\n            }\n\n            _this.deleting = false;\n          }).catch(function (error) {\n            _this.deleting = false;\n          });\n        }).catch(function () {\n          _this9.$message({\n            type: 'info',\n            message: '已取消删除'\n          });\n        });\n      } else {\n        _this.$message.error('请选择要删除的数据');\n      }\n    },\n    handleCommand: function handleCommand(command) {\n      var _this = this;\n\n      if (this.selectedRows.length > 0) {\n        var ids = (0, _utils.getArrByKey)(this.selectedRows, 'id');\n        var idstr = ids.join(',');\n        (0, _order.changeAll)({\n          val: idstr,\n          field: 'status',\n          value: command\n        }).then(function (response) {\n          if (response.status === 1) {\n            _this.list.forEach(function (item, index, input) {\n              if (ids.indexOf(item.id) > -1) {\n                _this.list[index]['status'] = command;\n              }\n            });\n\n            _this.$message.success(response.msg);\n          } else {\n            _this.$message.error(response.msg);\n          }\n        }).catch(function (error) {});\n      } else {\n        _this.$message.error('请选择要操作的数据');\n      }\n    }\n  }\n};\nexports.default = _default;",null]}