{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js!/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/light/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/light/index.vue","mtime":1591209237708},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/liangzexiang/WebstormProjects/ays/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _tools = require(\"@/api/tools\");\n\nvar _carlamp = require(\"@/api/carlamp\");\n\nvar _index = _interopRequireDefault(require(\"@/components/UploadExcel/index.vue\"));\n\nvar _form = _interopRequireDefault(require(\"./light/form\"));\n\nvar _shop = require(\"@/api/shop\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar sel = void 0;\nvar _default = {\n  name: 'index',\n  data: function data() {\n    return {\n      total: 0,\n      car: '',\n      importVisible: false,\n      list: [],\n      postFrom: {},\n      regionHiera: [],\n      listQuery: {\n        limit: 10,\n        page: 1\n      },\n      props: {\n        lazy: true,\n        lazyLoad: function lazyLoad(node, resolve) {\n          var level = node.level,\n              label = node.label;\n          console.log(node);\n\n          if (level === 0) {\n            (0, _tools.getBrand)().then(function (res) {\n              var data = res.data;\n              var nodes = [];\n\n              for (var i = 0; i < data.length; i++) {\n                nodes.push({\n                  label: data[i].name,\n                  value: data[i].brandid\n                });\n              }\n\n              resolve(nodes);\n            }); // 通过调用resolve将子节点数据返回，通知组件数据加载完成\n          }\n\n          if (level === 1) {\n            (0, _tools.getSeries)(node.data.value).then(function (res) {\n              var data = res.data;\n              var nodes = [];\n\n              for (var i = 0; i < data.length; i++) {\n                nodes.push({\n                  label: data[i].factory_name + \" \" + data[i].series_name,\n                  value: data[i].series_id\n                });\n              }\n\n              resolve(nodes);\n            }); // 通过调用resolve将子节点数据返回，通知组件数据加载完成\n          }\n\n          if (level === 2) {\n            (0, _tools.getModel)(node.data.value).then(function (res) {\n              var data = res.data;\n              var nodes = [];\n\n              for (var i = 0; i < data.length; i++) {\n                nodes.push({\n                  label: data[i].label,\n                  value: data[i].value,\n                  leaf: level >= 2\n                });\n              }\n\n              resolve(nodes);\n            }); // 通过调用resolve将子节点数据返回，通知组件数据加载完成\n          }\n\n          if (level === 3) {\n            var nodes = [];\n            resolve(nodes);\n          }\n        }\n      }\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    (0, _tools.getBrand)().then(function (res) {\n      _this.regionHiera = res.data;\n    });\n  },\n  components: {\n    InfoDta: _form.default,\n    UploadExcelComponent: _index.default\n  },\n  methods: {\n    importDow: function importDow() {\n      var url = 'https://pdpt.oss-cn-beijing.aliyuncs.com/%E6%94%B9%E7%81%AF%E6%96%B9%E6%A1%88%E5%AF%BC%E5%85%A5%E6%A8%A1%E6%9D%BF.xlsx';\n      window.location.href = url;\n    },\n    handleClose: function handleClose() {\n      this.importVisible = false;\n    },\n    importCarLamp: function importCarLamp() {\n      this.importVisible = true;\n    },\n    beforeUpload: function beforeUpload(file) {\n      var isLt1M = file.size / 1024 / 1024 < 1;\n\n      if (isLt1M) {\n        return true;\n      }\n\n      this.$message({\n        message: 'Please do not upload files larger than 1m in size.',\n        type: 'warning'\n      });\n      return false;\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.listQuery.limit = val;\n      this.fetchList();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.listQuery.page = 1;\n      this.fetchList();\n    },\n    handleSuccess: function handleSuccess(_ref) {\n      var _this2 = this;\n\n      var results = _ref.results,\n          header = _ref.header;\n      this.tableData = results;\n      console.log(results);\n      (0, _carlamp.importCarLamp)(results).then(function (res) {\n        _this2.importVisible = false;\n\n        _this2.$message.success(res.data.msg);\n      });\n      this.tableHeader = header;\n    },\n    updateRow: function updateRow(model_id) {\n      this.fetchList();\n    },\n    handleView: function handleView(item) {\n      this.$refs.infodata.handleView(item);\n    },\n    elCascaderCar: function elCascaderCar() {\n      var that = this;\n      setTimeout(function () {\n        document.querySelectorAll('.el-cascader-node__label').forEach(function (el) {\n          el.onclick = function () {\n            this.previousElementSibling.click();\n            that.$refs.car.dropDownVisible = false;\n          };\n        });\n        document.querySelectorAll('.el-cascader-panel .el-radio').forEach(function (el) {\n          el.onclick = function () {\n            that.$refs.car.dropDownVisible = false;\n          };\n        });\n      }, 100);\n    },\n    handleModel: function handleModel(e) {\n      var model_id = e;\n\n      if (model_id !== undefined) {\n        this.listQuery.model_id = model_id;\n        this.fetchList();\n      } else {\n        this.list = [];\n      }\n    },\n    fetchList: function fetchList() {\n      var _this3 = this;\n\n      (0, _carlamp.GetModelIdByInfo)(this.listQuery).then(function (res) {\n        _this3.list = res.data.data;\n        _this3.total = res.data.total;\n      });\n    }\n  }\n};\nexports.default = _default;",null]}