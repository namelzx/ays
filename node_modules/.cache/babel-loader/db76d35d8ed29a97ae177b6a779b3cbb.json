{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/thread-loader/dist/cjs.js!/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js!/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/shop/audit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/shop/audit.vue","mtime":1587402564000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _defineProperty from \"/Users/liangzexiang/WebstormProjects/ays/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\n\nvar _methods;\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// import InputForm from '@components/FormInput/index'\nimport InputForm from '@/components/FormInput/index';\nimport { change, changeAll, del, delAll, getList, PostDataByAudit, PostBlackByUpdate } from '@/api/shop';\nimport waves from '@/directive/waves';\nimport { getArrByKey, pickerOptions } from '@/utils';\nimport { GetDataByList, GetDataByShopAll } from '@/api/shop';\nimport { Citylist } from '@/api/city';\nimport ShList from '@/components/shop/index';\nimport { GetSaleByAll } from '@/api/salesman';\nimport openWindow from '@/utils/openWindow';\nexport default {\n  name: 'audit',\n  data: function data() {\n    return {\n      Associated: {},\n      news_edit: false,\n      //未启用关联\n      cityoptions: [],\n      //地址\n      ShopVisible: false,\n      form: {},\n      salesman: [],\n      input: '',\n      tableKey: 0,\n      rejectedFrom: {\n        shop_id: undefined,\n        desc: undefined\n      },\n      postFrom: {},\n      shoplist: [],\n      listLoading: true,\n      total: 0,\n      checkList: [],\n      dialogVisible: false,\n      innerVisible: false,\n      op: [{\n        label: '普通',\n        value: 1\n      }, {\n        label: '阿帕认证',\n        value: 2\n      }, {\n        label: '阿帕三星',\n        value: 3\n      }, {\n        label: '阿帕四星',\n        value: 4\n      }, {\n        label: '阿帕五星',\n        value: 5\n      }],\n      listQuery: {\n        page: 1,\n        limit: 10,\n        status: '1',\n        title: ''\n      },\n      BlockVisible: false,\n      shoptotal: 0,\n      backvalue: [],\n      mcvalue: [],\n      options: [{\n        value: 2,\n        label: '市场',\n        children: [{\n          value: 100000,\n          label: '永久'\n        }, {\n          value: 7,\n          label: '七天'\n        }, {\n          value: 30,\n          label: '一个月'\n        }, {\n          value: 90,\n          label: '三个月'\n        }, {\n          value: 365,\n          label: '1年'\n        }]\n      }],\n      mctions: [{\n        value: 3,\n        label: '电商',\n        children: [{\n          value: 100000,\n          label: '永久'\n        }, {\n          value: 7,\n          label: '七天'\n        }, {\n          value: 30,\n          label: '一个月'\n        }, {\n          value: 90,\n          label: '三个月'\n        }, {\n          value: 365,\n          label: '1年'\n        }]\n      }],\n      backtemp: {\n        blacklist: undefined,\n        blackday: undefined,\n        id: undefined\n      },\n      day: 0,\n      shop: {\n        id: '',\n        type: 1,\n        type_star: 1,\n        ec_recom: 1,\n        mt_recom: 1,\n        book: 1,\n        update_star: 1,\n        score: 1\n      },\n      list: [],\n      adminll: [],\n      shopQuery: {\n        cityCode: undefined,\n        shopname: undefined,\n        page: 1,\n        limit: 10,\n        tel: undefined\n      }\n    };\n  },\n  components: {\n    InputForm: InputForm,\n    waves: waves,\n    ShList: ShList\n  },\n  created: function created() {\n    var _this2 = this;\n\n    Citylist().then(function (res) {\n      _this2.cityoptions = res.data;\n    });\n    this.shopList();\n    this.fetchList();\n    GetSaleByAll().then(function (res) {\n      _this2.salesman = res.data;\n    });\n    adminall().then(function (res) {\n      _this2.adminll = res.data;\n    });\n  },\n  methods: (_methods = {\n    handleImg: function handleImg(img) {\n      openWindow(img, '图片预览', '500', '400');\n    },\n    elCascaderOnlick: function elCascaderOnlick() {\n      var that = this;\n      setTimeout(function () {\n        document.querySelectorAll('.el-cascader-node__label').forEach(function (el) {\n          el.onclick = function () {\n            this.previousElementSibling.click();\n            that.$refs.elcascader.dropDownVisible = false;\n          };\n        });\n        document.querySelectorAll('.el-cascader-panel .el-radio').forEach(function (el) {\n          el.onclick = function () {\n            that.$refs.elcascader.dropDownVisible = false;\n          };\n        });\n      }, 100);\n    }\n  }, _defineProperty(_methods, \"elCascaderOnlick\", function elCascaderOnlick() {\n    var that = this;\n    setTimeout(function () {\n      document.querySelectorAll('.el-cascader-node__label').forEach(function (el) {\n        el.onclick = function () {\n          this.previousElementSibling.click();\n          that.$refs.elcascader.dropDownVisible = false;\n        };\n      });\n      document.querySelectorAll('.el-cascader-panel .el-radio').forEach(function (el) {\n        el.onclick = function () {\n          that.$refs.elcascader.dropDownVisible = false;\n        };\n      });\n    }, 100);\n  }), _defineProperty(_methods, \"handelColse\", function handelColse() {\n    this.news_edit = false;\n    this.dialogVisible = false;\n  }), _defineProperty(_methods, \"clickToBlock\", function clickToBlock() {\n    this.BlockVisible = !this.BlockVisible;\n  }), _defineProperty(_methods, \"handleAssociated\", function handleAssociated() {\n    var _this3 = this;\n\n    PostDataByAudit(this.Associated).then(function (res) {\n      _this3.dialogVisible = false;\n      _this3.ShopVisible = false;\n\n      _this3.fetchList();\n\n      _this3.postFrom = {};\n      _this3.news_edit = false;\n    });\n  }), _defineProperty(_methods, \"handelToshop\", function handelToshop(e) {\n    console.log(e);\n    var data = this.postFrom;\n    this.postFrom.book = e.book;\n    this.postFrom.ec_rec = e.ec_rec;\n    this.postFrom.mk_rec = e.mk_rec;\n    this.postFrom.desc = e.desc;\n    this.postFrom.to_hang = e.to_hang;\n    this.postFrom.blacklist = e.blacklist;\n    this.postFrom.blackday = e.blackday;\n    this.postFrom.blackend = e.blackend;\n    console.log(e.salesman_id);\n    this.postFrom.salesman_id = e.salesman_id;\n    this.postFrom.ecblacklist = e.ecblacklist;\n    this.postFrom.ecblackday = e.ecblackday;\n    this.postFrom.ecblackend = e.ecblackend;\n    this.postFrom.shop_type = e.shop_type;\n    var citycode = e.cityCode.split(',');\n\n    if (e.cityCode) {\n      for (var i = 0; i < citycode.length; i++) {\n        citycode[i] = parseInt(citycode[i]);\n\n        if (i === 0) {\n          this.postFrom.city_id = citycode[i];\n        }\n\n        if (i === 1) {\n          this.postFrom.provinces_id = citycode[i];\n        }\n\n        if (i === 2) {\n          this.postFrom.county_id = citycode[i];\n        }\n      }\n\n      console.log(citycode);\n    }\n\n    this.postFrom.cityCode = citycode;\n\n    if (this.postFrom.book === 1) {\n      this.postFrom.book = true;\n    }\n\n    if (this.postFrom.ec_rec === 1) {\n      this.postFrom.ec_rec = true;\n    }\n\n    if (this.postFrom.mk_rec === 1) {\n      this.postFrom.mk_rec = true;\n    }\n\n    if (this.postFrom.to_hang === 1) {\n      this.postFrom.to_hang = true;\n    }\n\n    this.backvalue = [this.postFrom.blacklist, this.postFrom.blackday];\n    this.mcvalue = [this.postFrom.ecblacklist, this.postFrom.ecblackday];\n    var temp = {\n      nwe_id: this.postFrom.id,\n      postFrom: {\n        id: e.id,\n        shopkeeper: data.shopkeeper,\n        shopname: data.shopname,\n        tel: data.tel,\n        cityCode: data.cityCode,\n        location: data.location,\n        front: data.front,\n        license: data.license,\n        user_id: data.user_id\n      }\n    };\n    this.Associated = temp;\n    this.news_edit = true;\n    this.ShopVisible = false; // PostDataByAudit(temp).then(res=>{\n    //   console.log('更新成功')\n    //   this.dialogVisible=false;\n    //   this.ShopVisible=false;\n    //   this.fetchList()\n    //\n    // })\n  }), _defineProperty(_methods, \"handleChange\", function handleChange(value) {\n    this.day = value[1];\n    console.log(value[0]);\n\n    if (value[0] === 2) {\n      this.postFrom.blacklist = value[0];\n      this.postFrom.blackday = value[1];\n      this.backvalue = [value[0], value[1]];\n    }\n\n    if (value[0] === 3) {\n      this.postFrom.ecblacklist = value[0];\n      this.postFrom.ecblackday = value[1];\n      this.mcvalue = [value[0], value[1]];\n    }\n\n    console.log(value[0]);\n  }), _defineProperty(_methods, \"handleSizeShopChange\", function handleSizeShopChange(val) {\n    this.shopQuery.limit = val;\n    this.shopList();\n  }), _defineProperty(_methods, \"handleCurrentShopChange\", function handleCurrentShopChange(val) {\n    this.shopQuery.page = val;\n    this.shopList();\n  }), _defineProperty(_methods, \"shopList\", function shopList() {\n    var _this4 = this;\n\n    GetDataByList(this.shopQuery).then(function (response) {\n      _this4.shoplist = response.data.data;\n      console.log(_this4.shoplist);\n      _this4.shoptotal = response.data.total;\n    });\n  }), _defineProperty(_methods, \"fetchList\", function fetchList() {\n    var _this5 = this;\n\n    this.listLoading = true;\n    getList(this.listQuery).then(function (response) {\n      _this5.list = response.data.data;\n      _this5.total = response.data.total;\n      _this5.listLoading = false;\n    });\n  }), _defineProperty(_methods, \"handleFilter\", function handleFilter() {\n    this.listQuery.page = 1;\n    this.fetchList();\n  }), _defineProperty(_methods, \"handleFilterClear\", function handleFilterClear() {\n    this.listQuery = {\n      page: 1,\n      limit: 10,\n      status: '1',\n      title: ''\n    };\n    this.fetchList();\n  }), _defineProperty(_methods, \"handleClose\", function handleClose() {}), _defineProperty(_methods, \"handleNewAudit\", function handleNewAudit(type) {\n    var _this6 = this;\n\n    //通过\n    this.postFrom.status = type;\n    this.rejectedFrom.shop_id = this.postFrom.id;\n    var post = {\n      postFrom: this.postFrom,\n      rejectedFrom: this.rejectedFrom\n    };\n    PostDataByAudit(post).then(function (res) {\n      // console.log(res)\n      _this6.dialogVisible = !_this6.dialogVisible;\n      _this6.innerVisible = false;\n      _this6.postFrom = {};\n\n      _this6.handleFilterClear();\n\n      _this6.handleFilter();\n    });\n  }), _defineProperty(_methods, \"handleBack\", function handleBack() {\n    var _this7 = this;\n\n    var _this = this;\n\n    var day = this.day;\n\n    if (day === 100000) {\n      day = '永久';\n    } else {\n      day = day + '天';\n    }\n\n    this.$confirm('此操作将该门店 ' + day + ' 拉黑, 是否继续?', '提示', {\n      confirmButtonText: '确定',\n      cancelButtonText: '取消',\n      type: 'warning'\n    }).then(function () {\n      _this7.backtemp.id = _this7.postFrom.id;\n      PostBlackByUpdate(_this7.backtemp).then(function (res) {\n        console.log(res);\n        _this.BlockVisible = !_this7.BlockVisible;\n\n        _this7.$message.success('拉黑成功');\n\n        _this7.getinfo();\n      });\n    }).catch(function () {\n      _this.$message({\n        type: 'info',\n        message: '已取消删除'\n      });\n    });\n  }), _defineProperty(_methods, \"handleAudit\", function handleAudit(row) {\n    this.postFrom = row;\n\n    if (this.postFrom.book === 1) {\n      this.postFrom.book = true;\n    }\n\n    if (this.postFrom.ec_rec === 1) {\n      this.postFrom.ec_rec = true;\n    }\n\n    if (this.postFrom.mk_rec === 1) {\n      this.postFrom.mk_rec = true;\n    }\n\n    if (this.postFrom.blacklist === 1) {\n      this.postFrom.blacklist = true;\n    }\n\n    var citycode = [];\n\n    if (row.cityCode.constructor == Array) {\n      citycode = row.cityCode;\n    } else {\n      citycode = row.cityCode.split(',');\n    }\n\n    if (row.cityCode) {\n      for (var i = 0; i < citycode.length; i++) {\n        citycode[i] = parseInt(citycode[i]);\n\n        if (i === 0) {\n          this.postFrom.city_id = citycode[i];\n        }\n\n        if (i === 1) {\n          this.postFrom.provinces_id = citycode[i];\n        }\n\n        if (i === 2) {\n          this.postFrom.county_id = citycode[i];\n        }\n      }\n    }\n\n    this.postFrom.cityCode = citycode;\n    this.dialogVisible = !this.dialogVisible;\n  }), _defineProperty(_methods, \"handleSizeChange\", function handleSizeChange(val) {\n    this.listQuery.psize = val;\n    this.fetchList();\n  }), _defineProperty(_methods, \"handleCurrentChange\", function handleCurrentChange(val) {\n    this.listQuery.page = val;\n    this.fetchList();\n  }), _defineProperty(_methods, \"handleShopSizeChange\", function handleShopSizeChange(val) {\n    this.shopQuery.page = val;\n    this.shopList();\n  }), _defineProperty(_methods, \"handleShopCurrentChange\", function handleShopCurrentChange(val) {\n    this.shopQuery.page = val;\n    this.shopList();\n  }), _defineProperty(_methods, \"handleModifyStatus\", function handleModifyStatus(index, id, status) {\n    this.list[index]['status'] = 1 - status;\n    change(id, 'status', 1 - status).then(function (response) {});\n  }), _defineProperty(_methods, \"handleSelectionChange\", function handleSelectionChange(val) {\n    if (val.length > 0) {\n      this.buttonDisabled = false;\n    } else {\n      this.buttonDisabled = true;\n    }\n\n    this.selectedRows = val;\n  }), _defineProperty(_methods, \"handleCreate\", function handleCreate() {\n    this.$refs.fromRoles.handleCreate();\n  }), _defineProperty(_methods, \"handleUpdate\", function handleUpdate(index, id) {\n    this.currentIndex = index;\n    this.$refs.fromRoles.handleUpdate(id);\n  }), _defineProperty(_methods, \"updateRow\", function updateRow(temp) {\n    if (this.currentIndex >= 0 && temp.id > 0) {\n      this.list.splice(this.currentIndex, 1, temp);\n    } else {\n      if (this.list.length >= 10) {\n        this.list.pop();\n      }\n\n      this.list.push(temp);\n      this.total = this.total + 1;\n    }\n\n    this.currentIndex = -1;\n  }), _defineProperty(_methods, \"handleDelete\", function handleDelete(index, id) {\n    var _this8 = this;\n\n    var _this = this;\n\n    this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\n      confirmButtonText: '确定',\n      cancelButtonText: '取消',\n      type: 'warning'\n    }).then(function () {\n      _this.$set(_this.list[index], 'delete', true);\n\n      del(id).then(function (response) {\n        if (response.status === 1) {\n          _this.list.splice(index, 1);\n\n          _this.total = _this.total - 1;\n\n          _this.$notify.success(response.msg);\n        } else {\n          _this.$notify.error(response.msg);\n        }\n\n        _this.$set(_this.list[index], 'delete', false);\n      }).catch(function (error) {\n        _this.$set(_this.list[index], 'delete', false);\n      });\n    }).catch(function () {\n      _this8.$message({\n        type: 'info',\n        message: '已取消删除'\n      });\n    });\n  }), _defineProperty(_methods, \"handleDeleteAll\", function handleDeleteAll() {\n    var _this9 = this;\n\n    var _this = this;\n\n    if (this.selectedRows.length > 0) {\n      this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this.deleting = true;\n        var ids = getArrByKey(_this.selectedRows, 'id');\n        var idstr = ids.join(',');\n        delAll({\n          ids: idstr\n        }).then(function (response) {\n          if (response.status === 1) {\n            var delindex = [];\n\n            _this.list.forEach(function (item, index, input) {\n              if (ids.indexOf(item.id) > -1) {\n                delindex.push(index);\n              }\n            });\n\n            for (var i = delindex.length - 1; i >= 0; i--) {\n              _this.list.splice(delindex[i], 1);\n            }\n\n            _this.total = _this.total - delindex.length;\n\n            _this.$message.success(response.msg);\n          } else {\n            _this.$message.error(response.msg);\n          }\n\n          _this.deleting = false;\n        }).catch(function (error) {\n          _this.deleting = false;\n        });\n      }).catch(function () {\n        _this9.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    } else {\n      _this.$message.error('请选择要删除的数据');\n    }\n  }), _defineProperty(_methods, \"handleCommand\", function handleCommand(command) {\n    var _this = this;\n\n    if (this.selectedRows.length > 0) {\n      var ids = getArrByKey(this.selectedRows, 'id');\n      var idstr = ids.join(',');\n      changeAll({\n        val: idstr,\n        field: 'status',\n        value: command\n      }).then(function (response) {\n        if (response.status === 1) {\n          _this.list.forEach(function (item, index, input) {\n            if (ids.indexOf(item.id) > -1) {\n              _this.list[index]['status'] = command;\n            }\n          });\n\n          _this.$message.success(response.msg);\n        } else {\n          _this.$message.error(response.msg);\n        }\n      }).catch(function (error) {});\n    } else {\n      _this.$message.error('请选择要操作的数据');\n    }\n  }), _methods)\n};",null]}