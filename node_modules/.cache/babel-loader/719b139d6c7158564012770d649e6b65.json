{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/thread-loader/dist/cjs.js!/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js!/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/cost/install/sendOrder.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/cost/install/sendOrder.vue","mtime":1587637488397},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport _objectSpread from \"/Users/liangzexiang/WebstormProjects/ays/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread2\";\nimport _defineProperty from \"/Users/liangzexiang/WebstormProjects/ays/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { CarBrand } from \"@/api/tools\";\nimport ShList from \"@/components/shop/index\";\nimport { Citylist } from \"@/api/city\";\nimport { GetSaleByAll } from \"@/api/salesman\";\nimport { mapGetters } from \"vuex\";\nimport { GetDataByList, GetDataByShopAll } from \"@/api/shop\";\nimport { change, changeAll, del, delAll, GetIdBydetails, PostDataByAdd } from \"@/api/payorder\";\nimport { GetecshopByList } from \"@/api/ecshop\";\nimport { getArrByKey, pickerOptions } from \"@/utils\";\nimport { GetProductByTree } from \"@/api/product\";\nimport UploadList from \"@/components/Upload/uploadList\";\nvar defaultForm = {\n  logcontent: \"\",\n  openid: \"\",\n  lazada_id: \"\",\n  lazada_list: \"\",\n  lazada_index: \"\",\n  buy_order_no: \"12123\",\n  buy_account: \"199\",\n  buy_product_id: \"\",\n  no_price: \"199\",\n  contact: \"\",\n  tel: \"\",\n  city_code: undefined,\n  city_desc: \"\",\n  number_plate: \"A871237\",\n  car_model: undefined,\n  car_index: \"\",\n  car_model_id: \"\"\n};\nexport default {\n  name: \"SendOrder\",\n  data: function data() {\n    var _ref;\n\n    return _ref = {\n      is_load: false,\n      shopQuery: {\n        cityCode: undefined,\n        shopname: undefined,\n        page: 1,\n        limit: 10,\n        tel: undefined\n      },\n      imglist: [],\n      videolist: [],\n      is_disabled: false,\n      loading: false,\n      innerVisible: false,\n      // dialogVisible: false,\n      checked: true,\n      tableKey: 0,\n      CarModellist: [],\n      // 车型数据\n      lazada: [],\n      // 所有平台\n      salesman: [],\n      // 所有业务员\n      retype: [{\n        label: \"售后退款\",\n        value: \"售后退款\"\n      }, {\n        label: \"返现奖励\",\n        value: \"返现奖励\"\n      }, {\n        label: \"支架\",\n        value: \"支架\"\n      }, {\n        label: \"其他\",\n        value: \"其他\"\n      }],\n      //\n      carl: [],\n      list: null,\n      total: null,\n      // postFrom: Object.assign({}, defaultForm),\n      cityoptions: [],\n      // 地址\n      selectedRows: null,\n      listLoading: true,\n      showSearch: false,\n      options: [],\n      shop: [],\n      shoptotal: 0,\n      listQuery: {\n        page: 1,\n        limit: 10,\n        status: \"-1\",\n        title: \"\"\n      },\n      postFrom: {},\n      buttonDisabled: true,\n      deleting: false,\n      pickerOptions: pickerOptions,\n      currentIndex: -1,\n      productTree: [],\n      regionHiera: []\n    }, _defineProperty(_ref, \"shop\", []), _defineProperty(_ref, \"shoplist\", []), _defineProperty(_ref, \"innerVisible\", false), _ref;\n  },\n  computed: _objectSpread({}, mapGetters([\"userinfo\", \"brand\"])),\n  components: {\n    UploadList: UploadList,\n    ShList: ShList\n  },\n  props: {\n    Stitle: String,\n    dialogVisible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    Citylist().then(function (res) {\n      _this.cityoptions = res.data;\n    });\n    this.getshopList();\n\n    if (this.brand === undefined) {\n      CarBrand().then(function (res) {\n        _this.regionHiera = res.data;\n      });\n    } else {\n      this.regionHiera = this.brand;\n    }\n\n    GetProductByTree().then(function (res) {\n      _this.productTree = res.data;\n    });\n    GetecshopByList().then(function (res) {\n      _this.lazada = res.data;\n    });\n    GetDataByShopAll().then(function (res) {\n      _this.shop = res.data;\n    });\n    GetSaleByAll().then(function (res) {\n      _this.salesman = res.data;\n    });\n  },\n  mounted: function mounted() {\n    console.log(this.userinfo);\n  },\n  methods: {\n    handelToshop: function handelToshop(row) {\n      this.postFrom.shop_id = row.id;\n      this.postFrom.shop_location = row.cityName + \" \" + row.location;\n      this.postFrom.shop_tel = row.tel;\n      this.innerVisible = !this.innerVisible;\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.shopQuery.limit = val;\n      this.getshopList();\n    },\n    handleStatusChange: function handleStatusChange(val) {\n      this.shopQuery.page = 1;\n      this.getshopList();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.shopQuery.page = val;\n      this.getshopList();\n    },\n    getshopList: function getshopList() {\n      var _this2 = this;\n\n      GetDataByList(this.shopQuery).then(function (response) {\n        _this2.shoplist = response.data.data;\n        _this2.shoptotal = response.data.total;\n      });\n    },\n    handelInn: function handelInn() {\n      this.shop = [];\n      this.innerVisible = !this.innerVisible;\n    },\n    handelCreate: function handelCreate() {\n      var _this3 = this;\n\n      var img = [];\n\n      for (var i = 0; i < this.imglist.length; i++) {\n        img.push(this.imglist[i].url);\n      }\n\n      var video = [];\n\n      for (var _i = 0; _i < this.videolist.length; _i++) {\n        video.push(this.videolist[_i].url);\n      }\n\n      this.postFrom.logcontent = this.userinfo.realName + \"创建订单\";\n      this.postFrom.imglist = img.join(\",\");\n      this.postFrom.videolsit = video.join(\",\");\n\n      if (this.postFrom.buy_product_id === undefined) {\n        this.$message.error(\"请选择产品\");\n        return;\n      } else {\n        if (this.postFrom.buy_product_id.constructor === Array) {\n          this.postFrom.buy_product_id = this.postFrom.buy_product_id.join(\",\");\n        } else {\n          this.postFrom.buy_product_id = this.postFrom.buy_product_id;\n        }\n      }\n\n      if (this.postFrom.lazada_list === undefined) {\n        this.$message.error(\"请选择平台\");\n        return;\n      } else {\n        if (this.postFrom.lazada_list.constructor === Array) {\n          this.postFrom.lazada_list = this.postFrom.lazada_list.join(\",\");\n        } else {\n          this.postFrom.lazada_list = this.postFrom.lazada_list;\n        }\n      }\n\n      if (this.postFrom.city_code === undefined) {\n        this.$message.error(\"请选择地址\");\n        return;\n      } else {\n        if (this.postFrom.city_code.constructor === Array) {\n          this.postFrom.city_code = this.postFrom.city_code.join(\",\");\n        } else {\n          this.postFrom.city_code = this.postFrom.city_code;\n        }\n      }\n\n      if (this.postFrom.car_model === undefined) {\n        this.$message.error(\"请选择车型\");\n        return;\n      } else {\n        if (this.postFrom.car_model.constructor === Array) {\n          this.postFrom.car_model = this.postFrom.car_model.join(\",\");\n        } else {\n          this.postFrom.car_model = this.postFrom.car_model;\n        }\n      }\n\n      PostDataByAdd(this.postFrom).then(function (res) {\n        _this3.$emit(\"handleClose\");\n\n        _this3.$message.success(\"操作成功\");\n      });\n    },\n    handelFile: function handelFile(e) {\n      this.imglist.push({\n        url: e.file.data\n      });\n    },\n    handelVideo: function handelVideo(e) {\n      this.videolist.push({\n        url: e.file.data\n      });\n    },\n    loadData: function loadData() {\n      var _this4 = this;\n\n      this.loading = !this.loading;\n      GetIdBydetails(this.postFrom.order_id).then(function (res) {\n        if (res.data === 404) {\n          _this4.$message.error(\"该订单不存在\");\n\n          _this4.loading = !_this4.loading;\n          return true;\n        }\n\n        _this4.is_load = true; // 如果使用订单载人那么用户不可修改数据\n\n        var postFrom = res.data;\n\n        if (postFrom.city_code.constructor === String) {\n          postFrom.city_code = postFrom.city_code.split(\",\");\n\n          for (var i = 0; i < postFrom.city_code.length; i++) {\n            postFrom.city_code[i] = parseInt(postFrom.city_code[i]);\n          }\n        }\n\n        if (postFrom.car_model.constructor === String) {\n          postFrom.car_model = postFrom.car_model.split(\",\");\n        }\n\n        if (postFrom.buy_product_id.constructor === String) {\n          postFrom.buy_product_id = postFrom.buy_product_id.split(\",\");\n        }\n\n        var buy_product_id = postFrom.buy_product_id;\n        postFrom.buy_product_id = [];\n\n        for (var _i2 = 0; _i2 < buy_product_id.length; _i2++) {\n          postFrom.buy_product_id.push(parseInt(buy_product_id[_i2]));\n        }\n\n        if (postFrom.lazada_list.constructor === String) {\n          postFrom.lazada_list = postFrom.lazada_list.split(\",\");\n        }\n\n        var lazada = postFrom.lazada_list;\n        postFrom.lazada_list = [];\n\n        for (var _i3 = 0; _i3 < lazada.length; _i3++) {\n          postFrom.lazada_list.push(parseInt(lazada[_i3]));\n        }\n\n        _this4.postFrom = postFrom;\n        _this4.postFrom.order_id = postFrom.id;\n        _this4.loading = !_this4.loading;\n      });\n    },\n    // 所选门店\n    handleShop: function handleShop(e) {\n      this.postFrom.shop_id = e;\n\n      for (var i = 0; i < this.shop.length; i++) {\n        if (e === this.shop[i].id) {\n          this.postFrom.shop_location = this.shop[i].cityName + \" \" + this.shop[i].location;\n          this.postFrom.shop_tel = this.shop[i].tel;\n          return;\n        }\n      }\n    },\n    handleClose: function handleClose() {\n      this.$emit(\"handleClose\");\n    },\n    updateRow: function updateRow(type) {\n      this.postFrom.logcontent = this.userinfo.realName + \"创建订单\"; // this.postFrom.city_code = this.postFrom.city_code.join(',')\n      // this.postFrom.car_model = this.postFrom.car_model.join(',')\n      // this.postFrom.lazada_list = this.postFrom.lazada_list.join(',')\n      // this.postFrom.buy_product_id = this.postFrom.buy_product_id.join(',')\n      //\n      // this.postFrom.logcontent =  this.userinfo.realName + '创建订单,'\n      // if(this.Stitle==='新增支付单'){\n      //   this.postFrom.status = 0\n      //   this.postFrom.pre_sales = this.userinfo.id\n      //   this.postFrom.logcontent =  this.userinfo.realName + '创建订单,'\n      // }\n      // console.log(  this.postFrom.logcontent,1)\n      //\n      // PostDataByAdd(this.postFrom).then(res => {\n      //   this.$emit('handleClose')\n      //\n      //   this.postFrom = Object.assign({}, defaultForm)\n      //   this.postFrom.city_code = this.postFrom.city_code.splice(',')\n      //   this.postFrom.car_model = this.postFrom.car_model.splice(',')\n      // })\n    }\n  }\n};",null]}