{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js!/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/advertising/edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/advertising/edit.vue","mtime":1588843312147},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/liangzexiang/WebstormProjects/ays/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _wangeditor = _interopRequireDefault(require(\"wangeditor\"));\n\nvar _banner = require(\"@/api/banner\");\n\nvar _oneImage = _interopRequireDefault(require(\"@/components/Upload/oneImage\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// import {createHomeAdvertise, getHomeAdvertise, updateHomeAdvertise} from '@/api/homeAdvertise'\nvar defaultTypeOptions = [{\n  label: 'PC首页轮播',\n  value: 0\n}, {\n  label: 'APP首页轮播',\n  value: 1\n}];\nvar defaultHomeAdvertise = {\n  name: null,\n  type: 1,\n  images_url: null,\n  is_recomm: null,\n  content: null,\n  status: 2,\n  url: null,\n  sort: 0\n};\nvar _default = {\n  name: 'HomeAdvertiseDetail',\n  components: {\n    oneImage: _oneImage.default\n  },\n  props: {\n    isEdit: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      homeAdvertise: null,\n      rules: {\n        name: [{\n          required: true,\n          message: '请输入广告名称',\n          trigger: 'blur'\n        }, {\n          min: 2,\n          max: 140,\n          message: '长度在 2 到 140 个字符',\n          trigger: 'blur'\n        }],\n        url: [{\n          required: true,\n          message: '请输入广告链接',\n          trigger: 'blur'\n        }],\n        startTime: [{\n          required: true,\n          message: '请选择开始时间',\n          trigger: 'blur'\n        }],\n        endTime: [{\n          required: true,\n          message: '请选择到期时间',\n          trigger: 'blur'\n        }],\n        pic: [{\n          required: true,\n          message: '请选择广告图片',\n          trigger: 'blur'\n        }]\n      },\n      typeOptions: Object.assign({}, defaultTypeOptions)\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    console.log(this.$route);\n    var isedit = this.$route.name;\n\n    if (isedit === 'advertising/edit') {\n      (0, _banner.getBanner)(this.$route.params.id).then(function (response) {\n        _this.homeAdvertise = response.data;\n      });\n    } else {\n      this.homeAdvertise = Object.assign({}, defaultHomeAdvertise);\n    }\n  },\n  methods: {\n    handellicense: function handellicense(e) {\n      this.homeAdvertise.images_url = e.file.response.data;\n    },\n    onSubmit: function onSubmit(formName) {\n      var _this2 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          _this2.$confirm('是否提交数据', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(function () {\n            if (_this2.isEdit) {\n              updateHomeAdvertise(_this2.$route.query.id, _this2.homeAdvertise).then(function (response) {\n                _this2.$refs[formName].resetFields();\n\n                _this2.$message({\n                  message: '修改成功',\n                  type: 'success',\n                  duration: 1000\n                });\n\n                _this2.$router.back();\n              });\n            } else {\n              (0, _banner.PostDataByAdd)(_this2.homeAdvertise).then(function (response) {\n                _this2.$message({\n                  message: '提交成功',\n                  type: 'success',\n                  duration: 1000\n                });\n              });\n            }\n          });\n        } else {\n          _this2.$message({\n            message: '验证失败',\n            type: 'error',\n            duration: 1000\n          });\n\n          return false;\n        }\n      });\n    },\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n      this.homeAdvertise = Object.assign({}, defaultHomeAdvertise);\n    },\n    catchData: function catchData(e) {// this.homeAdvertise.confirmButtonText=\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    this.editor = new _wangeditor.default(this.$refs.editorElem); // 编辑器的事件，每次改变会获取其html内容\n\n    this.editor.customConfig.onchange = function (html) {\n      _this3.editorContent = html;\n\n      _this3.catchData(_this3.editorContent); // 把这个html通过catchData的方法传入父组件\n\n    };\n\n    this.editor.customConfig.menus = [// 菜单配置\n    'head', // 标题\n    'bold', // 粗体\n    'fontSize', // 字号\n    'fontName', // 字体\n    'italic', // 斜体\n    'underline', // 下划线\n    'strikeThrough', // 删除线\n    'foreColor', // 文字颜色\n    'backColor', // 背景颜色\n    'link', // 插入链接\n    'list', // 列表\n    'justify', // 对齐方式\n    'quote', // 引用\n    'emoticon', // 表情\n    'image', // 插入图片\n    'table', // 表格\n    'code', // 插入代码\n    'undo', // 撤销\n    'redo' // 重复\n    ];\n    this.editor.create(); // 创建富文本实例\n  }\n};\nexports.default = _default;",null]}