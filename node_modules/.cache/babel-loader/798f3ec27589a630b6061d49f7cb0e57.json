{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/thread-loader/dist/cjs.js!/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js!/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/order/install/info/details.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/order/install/info/details.vue","mtime":1587402564000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport _objectSpread from \"/Users/liangzexiang/WebstormProjects/ays/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread2\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// import { CarBrand } from '@/api/tools'\nimport { getBrand, getSeries, getModel } from '@/api/tools';\nimport { GetSaleByAll } from '@/api/salesman';\nimport { Citylist } from '@/api/city';\nimport { mapGetters } from 'vuex';\nimport { GetDataByShopAll } from '@/api/shop';\nimport { change, changeAll, del, delAll, GetDataByList, PostDataByAdd } from '@/api/order';\nimport { GetecshopByList } from '@/api/ecshop';\nimport { getArrByKey, parseTime, pickerOptions } from '@/utils';\nimport openWindow from '@/utils/openWindow';\nvar defaultForm = {\n  logcontent: '',\n  openid: 'oQJN40ldFZYLvqoIZm3NGwFu8oKA',\n  lazada_id: '',\n  lazada_list: '',\n  lazada_index: '',\n  buy_order_no: '12123',\n  buy_account: '199',\n  buy_product_id: '',\n  no_price: '199',\n  contact: '梁泽祥',\n  tel: '18677947067',\n  city_code: undefined,\n  city_desc: '',\n  number_plate: 'A871237',\n  car_model: undefined,\n  car_index: '',\n  car_model_id: ''\n};\nexport default {\n  name: 'sendOrder',\n  data: function data() {\n    return {\n      img: [],\n      colors: ['#99A9BF', '#F7BA2A', '#FF9900'],\n      // 等同于 { 2: '#99A9BF', 4: { value: '#F7BA2A', excluded: true }, 5: '#FF9900' }\n      value2: 5,\n      shopQuery: {\n        cityCode: undefined,\n        shopname: undefined,\n        tel: undefined\n      },\n      innerVisible: false,\n      // dialogVisible: false,\n      checked: true,\n      tableKey: 0,\n      CarModellist: [],\n      //车型数据\n      lazada: [],\n      //所有平台\n      salesman: [],\n      //所有业务员\n      holder: [{\n        label: '有',\n        value: 1\n      }, {\n        label: '无',\n        value: 2\n      }],\n      //支架\n      ygj: [{\n        label: '有',\n        value: 1\n      }, {\n        label: '随机发',\n        value: 2\n      }, {\n        label: '供应商代发',\n        value: 3\n      }],\n      //易改件\n      device: [],\n      //装置罩\n      carl: [],\n      list: null,\n      total: null,\n      props: {\n        lazy: true,\n        lazyLoad: function lazyLoad(node, resolve) {\n          var level = node.level;\n\n          if (level === 0) {\n            getBrand().then(function (res) {\n              var data = res.data;\n              var nodes = [];\n\n              for (var i = 0; i < data.length; i++) {\n                nodes.push({\n                  label: data[i].name,\n                  value: data[i].brandid\n                });\n              }\n\n              resolve(nodes);\n            }); // 通过调用resolve将子节点数据返回，通知组件数据加载完成\n          }\n\n          if (level === 1) {\n            getSeries(node.data.value).then(function (res) {\n              var data = res.data;\n              var nodes = [];\n\n              for (var i = 0; i < data.length; i++) {\n                nodes.push({\n                  label: data[i].factory_name + ' ' + data[i].series_name,\n                  value: data[i].series_id\n                });\n              }\n\n              resolve(nodes);\n            }); // 通过调用resolve将子节点数据返回，通知组件数据加载完成\n          }\n\n          if (level === 2) {\n            getModel(node.data.value).then(function (res) {\n              var data = res.data;\n              var nodes = [];\n\n              for (var i = 0; i < data.length; i++) {\n                nodes.push({\n                  label: data[i].label,\n                  value: data[i].value,\n                  leaf: level >= 2\n                });\n              }\n\n              resolve(nodes);\n            }); // 通过调用resolve将子节点数据返回，通知组件数据加载完成\n          }\n\n          if (level === 3) {\n            var nodes = [];\n            resolve(nodes);\n          }\n        }\n      },\n      // postFrom: Object.assign({}, defaultForm),\n      cityoptions: [],\n      //地址\n      selectedRows: null,\n      listLoading: true,\n      showSearch: false,\n      options: [],\n      shop: [],\n      listQuery: {\n        page: 1,\n        limit: 10,\n        status: '-1',\n        title: ''\n      },\n      buttonDisabled: true,\n      deleting: false,\n      pickerOptions: pickerOptions,\n      currentIndex: -1,\n      regionHiera: []\n    };\n  },\n  computed: _objectSpread({}, mapGetters(['userinfo', 'brand'])),\n  props: {\n    postFrom: {\n      type: Object,\n      default: function _default() {\n        return Object.assign({}, defaultForm);\n      }\n    },\n    Stitle: {\n      type: String,\n      default: ''\n    },\n    is_disabled: {\n      type: Boolean,\n      default: true\n    },\n    dialogVisible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    Citylist().then(function (res) {\n      _this.cityoptions = res.data;\n      console.log(_this.cityoptions);\n    });\n\n    if (this.postFrom.eva) {\n      if (this.postFrom.eva.img.constructor === String) {\n        this.img = this.postFrom.eva.img.split(',');\n      } else {\n        this.img = this.postFrom.eva.img;\n      }\n    }\n\n    GetecshopByList().then(function (res) {\n      _this.lazada = res.data;\n    });\n    GetDataByShopAll().then(function (res) {\n      _this.shop = res.data;\n    });\n    GetSaleByAll().then(function (res) {\n      _this.salesman = res.data;\n    });\n    console.log(this.postFrom.city_code);\n    var city_code = this.postFrom.city_code;\n    console.log(city_code);\n\n    for (var i = 0; i < city_code.length; i++) {\n      city_code[i] = parseInt(city_code[i]);\n    }\n\n    this.postFrom.city_code = city_code;\n  },\n  methods: {\n    handleImg: function handleImg(img) {\n      openWindow(img, '图片预览', '500', '400');\n    },\n    //所选门店\n    handleShop: function handleShop(e) {\n      this.postFrom.shop_id = e;\n\n      for (var i = 0; i < this.shop.length; i++) {\n        if (e === this.shop[i].id) {\n          this.postFrom.shop_location = this.shop[i].cityName + ' ' + this.shop[i].location;\n          this.postFrom.shop_tel = this.shop[i].tel;\n          return;\n        }\n      }\n    },\n    handleClose: function handleClose() {\n      this.$emit('handleClose');\n    },\n    updateRow: function updateRow() {\n      var _this2 = this;\n\n      this.postFrom.city_code = this.postFrom.city_code.join(',');\n      this.postFrom.car_model = this.postFrom.car_model.join(',');\n\n      if (this.postFrom.status === '待处理') {\n        this.postFrom.status = 1;\n        this.postFrom.logcontent = '待确认(业务员)' + ' ' + this.userinfo.realName + '派单 ' + ' ' + '已通知';\n      }\n\n      if (this.postFrom.status === '待确认(业务)') {\n        this.postFrom.status = 2;\n        this.postFrom.logcontent = '待确认(门店)' + ' ' + this.userinfo.realName + '同意派单,';\n      }\n\n      if (this.postFrom.status === '待确认(门店)') {\n        this.postFrom.status = 3;\n        this.postFrom.logcontent = '待安装' + ' ' + this.userinfo.realName + '已接单,';\n      }\n\n      if (this.postFrom.status === '待安装') {\n        this.postFrom.status = 4;\n        this.postFrom.logcontent = '已安装' + ' ' + this.userinfo.realName + '安装完成,';\n      }\n\n      if (this.postFrom.status === '已安装') {\n        this.postFrom.status = 5;\n        this.postFrom.logcontent = '财审1' + ' ' + this.userinfo.realName + '确认安装,';\n      }\n\n      if (this.postFrom.status === '财审1') {\n        this.postFrom.status = 6;\n        this.postFrom.logcontent = '财审2' + ' ' + this.userinfo.realName + '审核通过,';\n      }\n\n      if (this.postFrom.status === '财审2') {\n        this.postFrom.status = 7;\n        this.postFrom.logcontent = '待结算' + ' ' + this.userinfo.realName + '结算通过,';\n      }\n\n      PostDataByAdd(this.postFrom).then(function (res) {\n        _this2.$emit('handleClose');\n\n        _this2.postFrom = Object.assign({}, defaultForm);\n        _this2.postFrom.city_code = _this2.postFrom.city_code.splice(',');\n        _this2.postFrom.car_model = _this2.postFrom.car_model.splice(',');\n      });\n    }\n  }\n};",null]}