{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/thread-loader/dist/cjs.js!/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js!/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/manage/account/administrator.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/manage/account/administrator.vue","mtime":1587402564000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getList, del, change, delAll, changeAll } from '@/api/admin';\nimport waves from '@/directive/waves';\nimport { parseTime, pickerOptions, getArrByKey } from '@/utils';\nimport adminForm from \"./admin/form\";\nimport openWindow from '@/utils/openWindow';\nimport { getListAll } from '@/api/ol';\nexport default {\n  name: 'Admin',\n  components: {\n    adminForm: adminForm\n  },\n  directives: {\n    waves: waves\n  },\n  filters: {\n    statusFilter: function statusFilter(status) {\n      var statusMap = {\n        0: '禁用',\n        1: '正常'\n      };\n      return statusMap[status];\n    }\n  },\n  data: function data() {\n    return {\n      type_tab: 0,\n      tableKey: 0,\n      list: null,\n      total: null,\n      selectedRows: null,\n      listLoading: true,\n      roles: [],\n      showSearch: false,\n      listQuery: {\n        page: 1,\n        psize: 10,\n        isEnabled: '-1',\n        userName: '',\n        phone: '',\n        realName: '',\n        startTime: '',\n        endTime: ''\n      },\n      buttonDisabled: true,\n      deleting: false,\n      dateTime: '',\n      pickerOptions: pickerOptions,\n      currentIndex: -1\n    };\n  },\n  watch: {\n    dateTime: function dateTime(val) {\n      this.listQuery.startTime = val[0];\n      this.listQuery.endTime = val[1];\n    }\n  },\n  created: function created() {\n    this.fetchList();\n    this.getRoles();\n  },\n  methods: {\n    getRoles: function getRoles() {\n      var _this2 = this;\n\n      getListAll().then(function (response) {\n        _this2.roles = response.data;\n      });\n    },\n    fetchList: function fetchList() {\n      var _this3 = this;\n\n      this.listLoading = true;\n      getList(this.listQuery).then(function (response) {\n        _this3.list = response.data.data;\n        _this3.total = response.data.total;\n        _this3.listLoading = false;\n      });\n    },\n    handleFilter: function handleFilter() {\n      this.listQuery.page = 1;\n      this.fetchList();\n    },\n    handleFilterClear: function handleFilterClear() {\n      this.listQuery = {\n        page: 1,\n        psize: 10,\n        isEnabled: '-1',\n        userName: '',\n        phone: '',\n        realName: '',\n        startTime: '',\n        endTime: ''\n      };\n      this.dateTime = '';\n      this.fetchList();\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.listQuery.psize = val;\n      this.fetchList();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.listQuery.page = val;\n      this.fetchList();\n    },\n    handleModifyStatus: function handleModifyStatus(index, id, isEnabled) {\n      this.list[index]['isEnabled'] = 1 - isEnabled;\n      change(id, 'isEnabled', 1 - isEnabled).then(function (response) {});\n    },\n    handleSelectionChange: function handleSelectionChange(val) {\n      if (val.length > 0) {\n        this.buttonDisabled = false;\n      } else {\n        this.buttonDisabled = true;\n      }\n\n      this.selectedRows = val;\n    },\n    handleImg: function handleImg(img) {\n      openWindow(img, '图片预览', '500', '400');\n    },\n    handleCreate: function handleCreate() {\n      this.$refs.fromAdmin.handleCreate();\n    },\n    handleUpdate: function handleUpdate(index, id) {\n      this.currentIndex = index;\n      this.$refs.fromAdmin.handleUpdate(id);\n    },\n    updateRow: function updateRow(temp) {\n      if (this.currentIndex >= 0 && temp.id > 0) {\n        this.list.splice(this.currentIndex, 1, temp);\n      } else {\n        if (this.list.length >= 10) {\n          this.list.pop();\n        }\n\n        this.list.unshift(temp);\n        this.total = this.total + 1;\n      }\n\n      this.fetchList();\n      this.currentIndex = -1;\n    },\n    handleDelete: function handleDelete(index, id) {\n      var _this4 = this;\n\n      var _this = this;\n\n      this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this.$set(_this.list[index], 'delete', true);\n\n        del(id).then(function (response) {\n          if (response.status === 1) {\n            _this.list.splice(index, 1);\n\n            _this.total = _this.total - 1;\n\n            _this.$notify.success(response.msg);\n          } else {\n            _this.$notify.error(response.msg);\n          }\n\n          _this.$set(_this.list[index], 'delete', false);\n        }).catch(function (error) {\n          _this.$set(_this.list[index], 'delete', false);\n        });\n      }).catch(function () {\n        _this4.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n    handleDeleteAll: function handleDeleteAll() {\n      var _this5 = this;\n\n      var _this = this;\n\n      if (this.selectedRows.length > 0) {\n        this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(function () {\n          _this.deleting = true;\n          var ids = getArrByKey(_this.selectedRows, 'id');\n          var idstr = ids.join(',');\n          delAll({\n            ids: idstr\n          }).then(function (response) {\n            if (response.status === 1) {\n              var delindex = [];\n\n              _this.list.forEach(function (item, index, input) {\n                if (ids.indexOf(item.id) > -1) {\n                  delindex.push(index);\n                }\n              });\n\n              for (var i = delindex.length - 1; i >= 0; i--) {\n                _this.list.splice(delindex[i], 1);\n              }\n\n              _this.total = _this.total - delindex.length;\n\n              _this.$message.success(response.msg);\n            } else {\n              _this.$message.error(response.msg);\n            }\n\n            _this.deleting = false;\n          }).catch(function (error) {\n            _this.deleting = false;\n          });\n        }).catch(function () {\n          _this5.$message({\n            type: 'info',\n            message: '已取消删除'\n          });\n        });\n      } else {\n        _this.$message.error('请选择要删除的数据');\n      }\n    },\n    handleCommand: function handleCommand(command) {\n      var _this = this;\n\n      if (this.selectedRows.length > 0) {\n        var ids = getArrByKey(this.selectedRows, 'id');\n        var idstr = ids.join(',');\n        changeAll({\n          val: idstr,\n          field: 'isEnabled',\n          value: command\n        }).then(function (response) {\n          if (response.status === 1) {\n            _this.list.forEach(function (item, index, input) {\n              if (ids.indexOf(item.id) > -1) {\n                _this.list[index]['isEnabled'] = command;\n              }\n            });\n\n            _this.$message.success(response.msg);\n          } else {\n            _this.$message.error(response.msg);\n          }\n        }).catch(function (error) {});\n      } else {\n        _this.$message.error('请选择要操作的数据');\n      }\n    }\n  }\n};",null]}