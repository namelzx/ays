{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js!/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/user/userlist.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/user/userlist.vue","mtime":1587540325276},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/liangzexiang/WebstormProjects/ays/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _interopRequireWildcard2 = _interopRequireDefault(require(\"/Users/liangzexiang/WebstormProjects/ays/node_modules/@babel/runtime-corejs2/helpers/interopRequireWildcard\"));\n\nvar _wechatuser = require(\"@/api/wechatuser\");\n\nvar _city = require(\"@/api/city\");\n\nvar _waves = _interopRequireDefault(require(\"@/directive/waves\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  directives: {\n    waves: _waves.default\n  },\n  data: function data() {\n    return {\n      listQuery: {\n        page: 1,\n        limit: 10,\n        status: 'all',\n        title: '',\n        sstatus: 'all',\n        nickname: '',\n        contact: '',\n        cityCode: ''\n      },\n      optionsblick: [{\n        value: '1',\n        label: '拉黑'\n      }, {\n        value: '2',\n        label: '拉白'\n      }],\n      list: null,\n      total: 1,\n      checked: true,\n      listLoading: true,\n      cityoptions: [] // 地址\n\n    };\n  },\n  filters: {\n    blick: function blick(str) {\n      console.log(str);\n\n      if (str === 1) {\n        return '拉白';\n      } else {\n        return '拉黑';\n      }\n    }\n  },\n  created: function created() {\n    // this.permissions = this.group.btn.split(\",\");\n    // Citylist().then(res => {\n    //   this.cityoptions = res.data;\n    // });\n    this.fetchList();\n  },\n  methods: {\n    handelblack: function handelblack(row) {\n      var _this = this;\n\n      var str = '拉黑成功';\n      var temp = {\n        id: row.id,\n        is_black: 1\n      };\n\n      if (row.is_black === 1) {\n        temp.is_black = 2;\n        str = '拉白成功';\n        row.is_black = 2;\n      } else {\n        row.is_black = 1;\n      }\n\n      (0, _wechatuser.PostDataByBlick)(temp).then(function (res) {\n        _this.$message.success(str);\n      });\n    },\n    handleUpdate: function handleUpdate(id) {\n      this.$router.push({\n        path: '/user/info/' + id\n      });\n    },\n    fetchList: function fetchList() {\n      var _this2 = this;\n\n      this.listLoading = true;\n      console.log(this.listQuery.page);\n      (0, _wechatuser.getList)(this.listQuery).then(function (response) {\n        _this2.list = response.data.data;\n        _this2.total = response.data.total;\n        _this2.listLoading = false;\n        console.log(response.data.data, '111');\n      });\n    },\n    handleFilter: function handleFilter() {\n      this.listQuery.page = 1;\n      this.fetchList();\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.listQuery.page = val;\n      this.fetchList();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.listQuery.page = val;\n      this.listQuery.sstatus = val;\n      this.fetchList();\n    },\n    handelDelete: function handelDelete(index, id) {\n      var _this3 = this;\n\n      (0, _wechatuser.GetIdBydetele)(id).then(function (res) {\n        _this3.list.splice(index, 1);\n\n        _this3.$message.success('删除成功');\n      });\n    },\n    //导出数据\n    handleDownload: function handleDownload() {\n      var _this4 = this;\n\n      this.listLoading = true;\n      (0, _wechatuser.GetDataBydownload)(this.listQuery).then(function (res) {\n        Promise.resolve().then(function () {\n          return (0, _interopRequireWildcard2.default)(require('@/vendor/Export2Excel'));\n        }).then(function (excel) {\n          console.log(excel);\n          var tHeader = res.data.tHeader;\n          var filterVal = res.data.filterVal;\n\n          var data = _this4.formatJson(res.data.data, filterVal);\n\n          var day2 = new Date();\n          day2.setTime(day2.getTime());\n          var s2 = day2.getFullYear() + '-' + (day2.getMonth() + 1) + '-' + day2.getDate();\n          excel.export_json_to_excel({\n            header: tHeader,\n            data: data,\n            filename: '会员导出-' + s2\n          });\n          _this4.listLoading = false;\n\n          _this4.$message.success('下载成功');\n        });\n      });\n    },\n    formatJson: function formatJson(data, filterVal) {\n      return data.map(function (v) {\n        return filterVal.map(function (j) {\n          if (j === 'timestamp') {\n            return parseTime(v[j]);\n          } else {\n            return v[j];\n          }\n        });\n      });\n    }\n  }\n};\nexports.default = _default;",null]}