{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/thread-loader/dist/cjs.js!/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js!/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/user/components/OrderInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/user/components/OrderInfo.vue","mtime":1587402564000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport _objectSpread from \"/Users/liangzexiang/WebstormProjects/ays/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread2\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport DetailsInfo from \"./info/details\";\nimport PayInfo from \"./info/pay\";\nimport Timeline from \"./info/timeline\";\nimport returnVisit from \"./info/returnVisit\";\nimport { GetIdByOrderLog, GetTypeBySale, PostDataBySale, GetIdBypaydetails, GetIdBypayOrderLog } from \"@/api/order\";\nimport Upload from \"@/components/Upload/eva\";\nimport config from \"@/config\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"OrderInfo\",\n  computed: _objectSpread({}, mapGetters([\"userinfo\", \"brand\", \"group\"])),\n  components: {\n    DetailsInfo: DetailsInfo,\n    Timeline: Timeline,\n    returnVisit: returnVisit,\n    Upload: Upload,\n    PayInfo: PayInfo\n  },\n  props: {\n    OrderInfo: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    tabtext: {\n      type: String,\n      default: \"install\"\n    },\n    infodialogVisible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      payinfo: {},\n      payloglist: [],\n      is_payorder: false,\n      permissions: [],\n      //权限组\n      reTitle: \"\",\n      sale: [],\n      returninnerVisible: false,\n      content: \"\",\n      img: [],\n      activeName: \"install\",\n      loglist: [],\n      config: {\n        fileName: \"file\",\n        limit: 5,\n        multiple: false,\n        accept: \"image/*\",\n        action: config.uploadUrl.img,\n        drag: false\n      }\n    };\n  },\n  created: function created() {\n    this.permissions = this.group.btn.split(\",\");\n    this.activeName = this.tabtext;\n  },\n  methods: {\n    rolesbtn: function rolesbtn(val) {\n      var index = this.permissions.indexOf(val);\n\n      if (index > -1) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    //添加售后数据\n    handelContent: function handelContent() {\n      var _this = this;\n\n      var img = \"\";\n\n      for (var i = 0; i < this.img.length; i++) {\n        img = img + this.img[i][\"url\"] + \"|\";\n      }\n\n      var data = {\n        content: this.content,\n        img: img,\n        type: this.activeName,\n        order_id: this.OrderInfo.id\n      };\n      PostDataBySale(data).then(function (res) {\n        console.log(res);\n\n        _this.getsale();\n\n        _this.returninnerVisible = !_this.returninnerVisible;\n      });\n    },\n    getsale: function getsale() {\n      var _this2 = this;\n\n      var temp = {\n        order_id: this.OrderInfo.id,\n        type: this.activeName\n      };\n      GetTypeBySale(temp).then(function (res) {\n        // this.sale=res.data\n        var arr = [];\n\n        for (var i = 0; i < res.data.length; i++) {\n          arr[i] = res.data[i];\n          arr[i].img = res.data[i].img.split(\"|\");\n        }\n\n        _this2.sale = arr;\n      });\n    },\n    //组件图片上传\n    handelRuimg: function handelRuimg(row) {\n      this.img.push({\n        url: row.data\n      });\n    },\n    handleClose: function handleClose() {\n      this.$emit(\"handelInfoDialog\", !this.infodialogVisible);\n    },\n    handleClick: function handleClick(tab, event) {\n      var _this3 = this;\n\n      //\n      if (tab.paneName === \"instalog\") {\n        GetIdByOrderLog(this.OrderInfo.id).then(function (res) {\n          _this3.loglist = res.data;\n        });\n      }\n\n      if (tab.paneName === \"paylog\") {\n        GetIdBypayOrderLog(this.OrderInfo.id).then(function (res) {\n          _this3.payloglist = res.data;\n        });\n      } //如果是支付单\n\n\n      if (tab.paneName === \"pay\") {\n        GetIdBypaydetails(this.OrderInfo.id).then(function (res) {\n          console.log(res);\n\n          if (res.data === 404) {\n            _this3.is_payorder = false;\n\n            _this3.$message.error(\"尚未添加支付单\");\n          } else {\n            var row = res.data;\n            var payinfo = res.data;\n\n            if (row.city_code.constructor === String) {\n              payinfo.city_code = payinfo.city_code.split(\",\");\n            }\n\n            if (row.car_model.constructor === String) {\n              payinfo.car_model = payinfo.car_model.split(\",\");\n            }\n\n            if (row.lazada_list.constructor === String) {\n              payinfo.lazada_list = payinfo.lazada_list.split(\",\");\n            }\n\n            var lazada = payinfo.lazada_list;\n            payinfo.lazada_list = [];\n\n            for (var i = 0; i < lazada.length; i++) {\n              payinfo.lazada_list.push(parseInt(lazada[i]));\n            }\n\n            _this3.payinfo = payinfo;\n            _this3.is_payorder = true;\n          }\n        });\n      }\n\n      if (tab.paneName === \"return\") {\n        this.getsale();\n      }\n\n      if (tab.paneName === \"sales\") {\n        this.getsale();\n      }\n    }\n  },\n  watch: {\n    activeName: function activeName(e) {\n      if (e === \"return\") {\n        this.getsale();\n      }\n\n      console.log(\"售后服务\");\n\n      if (e === \"sales\") {\n        this.getsale();\n      }\n    }\n  }\n};",null]}