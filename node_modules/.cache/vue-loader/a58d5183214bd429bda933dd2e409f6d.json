{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/cost/install/sendOper.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/cost/install/sendOper.vue","mtime":1587402564000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { CarBrand } from \"@/api/tools\";\nimport ShList from \"@/components/shop/index\";\n\nimport { Citylist } from \"@/api/city\";\n\nimport { GetSaleByAll } from \"@/api/salesman\";\nimport { mapGetters } from \"vuex\";\n\nimport { GetDataByList, GetDataByShopAll } from \"@/api/shop\";\n\nimport {\n  change,\n  changeAll,\n  del,\n  delAll,\n  GetIdBydetails,\n  PostDataByAdd\n} from \"@/api/costorder\";\nimport { GetecshopByList } from \"@/api/ecshop\";\nimport { getArrByKey, pickerOptions } from \"@/utils\";\nimport { GetProductByTree } from \"@/api/product\";\n\nimport UploadList from \"@/components/Upload/uploadList\";\n\n\nexport default {\n  name: \"SendOrder\",\n  data() {\n    return {\n      is_load: false,\n      shopQuery: {\n        cityCode: undefined,\n        shopname: undefined,\n        page: 1,\n        limit: 10,\n        tel: undefined\n      },\n      imglist: [],\n      videolist: [],\n      is_disabled: false,\n      loading: false,\n      innerVisible: false,\n      checked: true,\n      tableKey: 0,\n      CarModellist: [], // 车型数据\n      lazada: [], // 所有平台\n      salesman: [], // 所有业务员\n      retype: [\n        {\n          label: \"待初审\",\n          value: 1\n        },\n        {\n          label: \"待财审1\",\n          value: 2\n        },\n        {\n          label: \"待财审2\",\n          value: 3\n        },\n        {\n          label: \"待结算\",\n          value: 4\n        },\n        {\n          label: \"已结算\",\n          value: 5\n        },\n        {\n          label: \"驳回\",\n          value: 6\n        }\n      ], //\n\n      carl: [],\n      list: null,\n      total: null,\n\n      cityoptions: [], // 地址\n      selectedRows: null,\n      listLoading: true,\n      showSearch: false,\n      options: [],\n      shop: [],\n      listQuery: {\n        page: 1,\n        limit: 10,\n        status: \"-1\",\n        title: \"\"\n      },\n      postFrom: {},\n      buttonDisabled: true,\n      deleting: false,\n      pickerOptions: pickerOptions,\n      currentIndex: -1,\n      productTree: [],\n      regionHiera: [],\n      shop: [],\n      innerVisible: false\n    };\n  },\n  computed: {\n    ...mapGetters([\"userinfo\", \"brand\"])\n  },\n  components: {\n    UploadList,\n    ShList\n  },\n  props: {\n    stitle: {\n      type: String,\n      default: \"\"\n    },\n    dialogVisible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  created() {\n    GetecshopByList().then(res => {\n      this.lazada = res.data;\n    });\n    this.postFrom.proposer=this.userinfo.realName\n    this.postFrom.status=1;\n  },\n  mounted() {\n    console.log(this.userinfo);\n  },\n  methods: {\n    handelToshop(row) {\n      this.postFrom.shop_id = row.id;\n      this.postFrom.shop_location = row.cityName + \" \" + row.location;\n      this.postFrom.shop_tel = row.tel;\n      this.innerVisible = !this.innerVisible;\n    },\n\n    handleSizeChange(val) {\n      this.shopQuery.limit = val;\n      this.shopList();\n    },\n\n    handleStatusChange(val) {\n      this.shopQuery.page = 1;\n\n      this.shopList();\n    },\n    handleCurrentChange(val) {\n      this.shopQuery.page = val;\n      this.shopList();\n    },\n    shopList() {\n      GetDataByList(this.shopQuery).then(response => {\n        this.shoplist = response.data.data;\n        this.shoptotal = response.data.total;\n      });\n    },\n    handelInn() {\n      this.shop = [];\n      this.innerVisible = !this.innerVisible;\n    },\n    handelCreate() {\n      console.log(this.postFrom.lazada_list)\n      if(this.postFrom.lazada_list ==undefined ||this.postFrom.lazada_list.length<1){\n        this.$message.error('平台必须选');\n        return;\n      }\n      if(this.postFrom.bank ==undefined){\n        this.$message.error('银行必填');\n        return;\n      }\n\n\n      const img = [];\n      for (let i = 0; i < this.imglist.length; i++) {\n        img.push(this.imglist[i].url);\n      }\n      const video = [];\n      for (let i = 0; i < this.videolist.length; i++) {\n        video.push(this.videolist[i].url);\n      }\n      this.postFrom.logcontent = this.userinfo.realName + \"创建订单\";\n      this.postFrom.imglist = img.join(\",\");\n      this.postFrom.videolist = video.join(\",\");\n      // this.postFrom.city_code = this.postFrom.city_code.join(\",\");\n      // this.postFrom.car_model = this.postFrom.car_model.join(\",\");\n\n      this.postFrom.lazada_list = this.postFrom.lazada_list.join(\",\");\n      // this.postFrom.buy_product_id = this.postFrom.buy_product_id.join(\",\");\n      PostDataByAdd(this.postFrom).then(res => {\n        this.$emit(\"handleClose\");\n        this.$message.success(\"操作成功\");\n      });\n    },\n\n    handelFile(e) {\n      this.imglist.push({ url: e.file.data });\n    },\n    // handelFile2(e) {\n    //   this.imglist2.push({ url: e.file.data });\n    // },\n    // handelFile3(e) {\n    //   this.imglist3.push({ url: e.file.data });\n    // },\n    handelVideo(e) {\n      this.videolist.push({ url: e.file.data });\n    },\n    // handelVideo2(e) {\n    //   this.videolist2.push({ url: e.file.data });\n    // },\n    loadData() {\n      this.loading = !this.loading;\n      GetIdBydetails(this.postFrom.order_id).then(res => {\n        if (res.data === 404) {\n          this.$message.error(\"该订单不存在\");\n          this.loading = !this.loading;\n          return true;\n        }\n        this.is_load = true; // 如果使用订单载人那么用户不可修改数据\n        const postFrom = res.data;\n        if (postFrom.city_code.constructor === String) {\n          postFrom.city_code = postFrom.city_code.split(\",\");\n        }\n        if (postFrom.car_model.constructor === String) {\n          postFrom.car_model = postFrom.car_model.split(\",\");\n        }\n\n        if (postFrom.buy_product_id.constructor === String) {\n          postFrom.buy_product_id = postFrom.buy_product_id.split(\",\");\n        }\n        const buy_product_id = postFrom.buy_product_id;\n\n        postFrom.buy_product_id = [];\n        for (let i = 0; i < buy_product_id.length; i++) {\n          postFrom.buy_product_id.push(parseInt(buy_product_id[i]));\n        }\n\n        if (postFrom.lazada_list.constructor === String) {\n          postFrom.lazada_list = postFrom.lazada_list.split(\",\");\n        }\n        const lazada = postFrom.lazada_list;\n        postFrom.lazada_list = [];\n\n        for (let i = 0; i < lazada.length; i++) {\n          postFrom.lazada_list.push(parseInt(lazada[i]));\n        }\n        this.postFrom = postFrom;\n        this.postFrom.order_id = postFrom.id;\n        this.loading = !this.loading;\n      });\n    },\n    // 所选门店\n    handleShop(e) {\n      this.postFrom.shop_id = e;\n      for (let i = 0; i < this.shop.length; i++) {\n        if (e === this.shop[i].id) {\n          this.postFrom.shop_location =\n            this.shop[i].cityName + \" \" + this.shop[i].location;\n          this.postFrom.shop_tel = this.shop[i].tel;\n          return;\n        }\n      }\n    },\n    handleClose() {\n      this.$emit(\"handleClose\");\n    },\n    updateRow(type) {\n      this.postFrom.logcontent = this.userinfo.realName + \"创建订单\";\n    }\n  }\n};\n",null]}