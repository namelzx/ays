{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/shop/components/mendian.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/shop/components/mendian.vue","mtime":1589913857992},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n    GetIDByDetails,\n    PostBlackByUpdate,\n    PostWhiteByUpdate,\n    PostDataByRecommended,\n    GetIdBydelete\n} from '@/api/shop'\nimport Info from './mendianinfo'\nimport Bind from './bind'\n\nimport Bussiness from './business'\n\nimport {GetProjectBy, PostBussByUpdate} from '@/api/shop'\n\nimport openWindow from '@/utils/openWindow'\n\nexport default {\n    name: 'MenDian',\n    props: {\n        // shop: {\n        //   type: Object\n        // }\n        id: {\n            type: String,\n            default: 0\n        }\n    },\n    data() {\n        return {\n            whiteVisible: false,\n            BlockVisible: false,\n            activeName: 'info',\n            dialogEdInfo: false,\n            dialogVisible: false,\n            dialogBind: false,\n            dialogBuss: false,\n            backvalue: '',\n            backtemp: {\n                blacklist: undefined,\n                blackday: undefined,\n                id: undefined\n            },\n            options: [{\n                value: 2,\n                label: '市场',\n                children: [{\n                    value: 100000,\n                    label: '永久'\n                }, {\n                    value: 7,\n                    label: '七天'\n                }, {\n                    value: 30,\n                    label: '一个月'\n                }, {\n                    value: 90,\n                    label: '三个月'\n                }, {\n                    value: 365,\n                    label: '1年'\n                }\n                ]\n            }, {\n                value: 3,\n                label: '电商',\n                children: [{\n                    value: 100000,\n                    label: '永久'\n                }, {\n                    value: 7,\n                    label: '七天'\n                }, {\n                    value: 30,\n                    label: '一个月'\n                }, {\n                    value: 90,\n                    label: '三个月'\n                }, {\n                    value: 365,\n                    label: '1年'\n                }\n                ]\n            }],\n            day: 0,\n            shop: {\n                id: '',\n                type: 1,\n                type_star: 1,\n                ec_recom: 1,\n                mt_recom: 1,\n                book: 1,\n                update_star: 1,\n                score: 1\n            },\n            main: [],\n            serve: []\n        }\n    },\n    components:\n        {\n            Info,\n            Bind,\n            Bussiness\n        }\n    ,\n    filters: {\n        serv(arr) {\n            var str = ''\n            for (let i = 0; i < arr.length; i++) {\n                str = str + arr[i].title + ','\n            }\n            return str\n        }\n    }\n    ,\n    created() {\n        this.getinfo()\n        GetProjectBy(this.id).then(res => {\n            console.log(res)\n            this.main = res.data.main\n            this.serve = res.data.serve\n        })\n    }\n    ,\n    methods: {\n        handelDelete() {\n            this.$confirm('此操作将该门店 永久删除(不可恢复)', '是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n\n                GetIdBydelete(this.shop.id).then(res => {\n                    this.$message.success('删除成功')\n                    this.$router.go(-1)\n                })\n            }).catch(() => {\n                _this.$message({\n                    type: 'info',\n                    message: '已取消删除'\n                })\n            })\n        },\n\n        handleImg(img) {\n            openWindow(img, '图片预览', '500', '400')\n        },\n\n        handelMmended(e) {\n            var temp = {\n                filed: 'ec_rec',\n                id: this.shop.id\n            }\n            let str = ''\n            if (e) {\n                temp.value = 1\n                str = '电商推荐已开启';\n\n            } else {\n                temp.value = 0\n                str = '电商推荐已关闭';\n            }\n            PostDataByRecommended(temp).then(res => {\n                this.$message.success(str);\n            })\n        },\n\n        handelwithdrawal(e) {\n            var temp = {\n                filed: 'withdrawal',\n                id: this.shop.id,\n                value: e\n            }\n            let str = ''\n            if (e === 1) {\n                str = '提现已开启';\n            } else {\n                str = '提现已关闭';\n            }\n            this.shop.withdrawal = e\n            PostDataByRecommended(temp).then(res => {\n                this.$message.success(str);\n            })\n        },\n\n        handelmk_rec(e) {\n            var temp = {\n                filed: 'mk_rec',\n                id: this.shop.id\n            }\n            if (e) {\n                temp.value = 1\n            } else {\n                temp.value = 0\n            }\n            let str = '';\n            if (e) {\n                str = '市场推荐已开启';\n\n            } else {\n                str = '市场推荐已关闭';\n            }\n            PostDataByRecommended(temp).then(res => {\n                this.$message.success(str);\n\n            })\n        },\n\n        handelbook(e) {\n            var temp = {\n                filed: 'book',\n                id: this.shop.id\n            }\n            if (e) {\n                temp.value = 1\n            } else {\n                temp.value = 0\n            }\n            let str = '';\n            if (e) {\n                str = '宝典已开启';\n\n            } else {\n                str = '宝典已关闭';\n            }\n            PostDataByRecommended(temp).then(res => {\n                this.$message.success(str);\n            })\n        },\n\n        handelhang(e) {\n            var temp = {\n                filed: 'to_hang',\n                id: this.shop.id\n            }\n            if (e) {\n                temp.value = 1\n            } else {\n                temp.value = 0\n            }\n            let str = '';\n            if (e) {\n                str = '挂帐已开启';\n\n            } else {\n                str = '挂帐已关闭';\n            }\n            PostDataByRecommended(temp).then(res => {\n                this.$message.success(str);\n            })\n        },\n        handelWhite(type) {\n            //市场拉白\n            var tmep = {}\n            if (type === 'ma') {\n                var temp = {\n                    id: this.shop.id,\n                    blacklist: 1,\n                    blackday: 0,\n                    blackend: 0\n                }\n            }\n            if (type === 'ec') {\n                var temp = {\n                    id: this.shop.id,\n                    ecblacklist: 1,\n                    ecblackday: 0,\n                    ecblackend: 0\n                }\n            }\n            PostWhiteByUpdate(temp).then(res => {\n                this.$message.success('拉白成功')\n                this.getinfo()\n                this.whiteVisible = false\n            })\n\n        },\n        clickToWhite() {\n            this.whiteVisible = false\n        },\n        handleChange(value) {\n            this.day = value[1]\n            console.log(value[0])\n            if (value[0] === 2) {\n                this.backtemp.blacklist = value[0]\n                this.backtemp.blackday = value[1]\n                this.backtemp.id = this.id\n                this.backtemp.ecblacklist = undefined\n                this.backtemp.ecblackday = undefined\n            }\n            if (value[0] === 3) {\n                this.backtemp.ecblacklist = value[0]\n                this.backtemp.ecblackday = value[1]\n                this.backtemp.blacklist = undefined\n                this.backtemp.blackday = undefined\n                this.backtemp.id = this.id\n            }\n\n        },\n        //拉黑\n        handleBack() {\n            const _this = this\n            var day = this.day\n            if (day === 100000) {\n                day = '永久'\n            } else {\n                day = day + '天'\n            }\n            this.$confirm('此操作将该门店 ' + day + ' 拉黑, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n\n                PostBlackByUpdate(this.backtemp).then(res => {\n                    console.log(res)\n                    _this.BlockVisible = !this.BlockVisible\n                    this.$message.success('拉黑成功')\n                    this.getinfo()\n                })\n            }).catch(() => {\n                _this.$message({\n                    type: 'info',\n                    message: '已取消删除'\n                })\n            })\n        },\n        getinfo() {\n            GetIDByDetails(this.id).then(res => {\n                this.shop = res.data\n                // if(this.shop)\n                if (this.shop.book === 1) {\n                    this.shop.book = true\n                }\n                if (this.shop.ec_rec === 1) {\n                    this.shop.ec_rec = true\n                }\n                if (this.shop.to_hang === 1) {\n                    this.shop.to_hang = true\n                }\n                if (this.shop.mk_rec === 1) {\n                    this.shop.mk_rec = true\n                }\n                if (this.shop.blacklist === 1) {\n                    this.shop.blacklist = true\n                }\n            })\n        }\n        ,\n        clickToEdInfo() {\n            this.postFrom = this.shop\n\n            if (this.postFrom.cityCode) {\n                if (this.postFrom.cityCode.constructor === String) {\n                    let li = this.postFrom.cityCode.split(',')\n\n                    let arr = []\n                    for (let i = 0; i < li.length; i++) {\n                        arr.push(li[i])\n                    }\n                    this.postFrom.cityCode = arr\n\n                }\n            }\n            this.dialogEdInfo = !this.dialogEdInfo\n        }\n        ,\n        handleCloseInfo() {\n            this.getinfo()\n            this.dialogEdInfo = !this.dialogEdInfo\n        }\n        ,\n        handleCloseBuss() {\n            this.getinfo()\n            this.dialogBuss = !this.dialogBuss\n        }\n        ,\n        handleCloseBind() {\n            this.getinfo()\n            this.dialogBind = !this.dialogBind\n        }\n        ,\n        handleClose() {\n            this.getinfo()\n            this.dialogVisible = !this.dialogVisible\n        }\n        ,\n        clickToDeSync() {\n            console.log('解封同步')\n        }\n        ,\n        clickToBlock() {\n            this.BlockVisible = !this.BlockVisible\n        }\n        ,\n        clickToDeBlock() {\n            console.log('拉白')\n        }\n        ,\n        clickToEdBase() {\n\n            this.postFrom = this.shop\n\n            if (this.postFrom.cityCode.constructor === String) {\n                let li = this.postFrom.cityCode.split(',')\n\n                let arr = []\n                for (let i = 0; i < li.length; i++) {\n                    arr.push(li[i])\n                }\n                this.postFrom.cityCode = arr\n\n            }\n\n            this.dialogVisible = !this.dialogVisible\n\n            console.log('改基本信息')\n        }\n        ,\n        clickToEdBuss() {\n            this.postFrom = this.shop\n            this.dialogBuss = !this.dialogBuss\n        }\n        ,\n        clickToEdBind() {\n            this.postFrom = this.shop\n            this.dialogBind = !this.dialogBind\n            console.log('修改绑定')\n        }\n    }\n}\n",null]}