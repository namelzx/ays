{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/marketing/components/coupon.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/marketing/components/coupon.vue","mtime":1587402564000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n  GetDataByList\n} from '@/api/shopgroup'\nimport {\n  GetcouponByList, PostDataByAdd,GetIdByDelete\n} from '@/api/platformcoupon'\n\nimport {\n  parseTime\n} from '@/utils'\nimport { mapGetters } from \"vuex\";\n\nexport default {\n  name: 'ZiChan',\n  data() {\n    return {\n      postFrom: {},\n      group: [],\n      date: '',\n      date2: '',\n      sortOpt: '',\n      statusOpt: '',\n      expirOpt: '',\n      curTicket: '',\n      showTicket: false,\n      showCoupon: false, // 新建优惠券弹出层\n      navbar: ['无金额限制', '最低消费'],\n      navindex: 0,\n      periodlist: ['固定日期', '领取生效，有效天数'],\n      periodid: 0,\n      statusop:[\n        {\n          value: 1,\n          label: '发送中'\n        },\n        {\n          value: 3,\n          label: '已删除'\n        },\n        {\n          value: 2,\n          label: '已过期'\n        },\n      ],\n      sort: [\n        {\n          value: '通用券',\n          label: '通用券'\n        },\n        {\n          value: '阿帕通用',\n          label: '阿帕通用'\n        },\n        {\n          value: '非阿帕通用',\n          label: '非阿帕通用'\n        }\n      ],\n      options: [\n        {\n          value: '已过期',\n          label: '已过期'\n        },\n        {\n          value: '发送中',\n          label: '发送中'\n        },\n        {\n          value: '已删除',\n          label: '已删除'\n        }\n      ],\n      expirTime: [\n        {\n          value: 0,\n          label: '全部'\n        },\n        {\n          value: 7,\n          label: '7天内'\n        },\n        {\n          value: 30,\n          label: '30天内'\n        }\n      ],\n      ticketList: [\n        {\n          id: 1,\n          sub_money: '200',\n          condition: '2599',\n          owner: '阿帕专享',\n          comment: [\n            {\n              text:\n                '此优惠券不与其他优惠券同时使用 此优惠券不与其他优惠券同时使用'\n            },\n            {\n              text:\n                '此优惠券不与其他优惠券同时使用 此优惠券不与其他优惠券同时使用'\n            }\n          ],\n          start_time: '2019.11.1 00:00',\n          end_time: '2019.11.1 23:59',\n          status: 1 // 未使用\n        },\n        {\n          id: 2,\n          sub_money: '200',\n          condition: '2599',\n          owner: '非阿帕专享',\n          comment: [\n            {\n              text:\n                '此优惠券不与其他优惠券同时使用 此优惠券不与其他优惠券同时使用'\n            }\n          ],\n          start_time: '2019.11.1 00:00',\n          end_time: '2019.11.1 23:59',\n          status: 2 // 已使用\n        },\n        {\n          id: 3,\n          sub_money: '200',\n          condition: '2599',\n          owner: '通用券',\n          comment: [\n            {\n              text:\n                '此优惠券不与其他优惠券同时使用 此优惠券不与其他优惠券同时使用'\n            },\n            {\n              text:\n                '此优惠券不与其他优惠券同时使用 此优惠券不与其他优惠券同时使用'\n            }\n          ],\n          start_time: '2019.11.1 00:00',\n          end_time: '2019.11.1 23:59',\n          status: 3 // 过期\n        },\n        {\n          id: 4,\n          sub_money: '200',\n          condition: '2599',\n          owner: '通用券',\n          comment: [\n            {\n              text:\n                '此优惠券不与其他优惠券同时使用 此优惠券不与其他优惠券同时使用'\n            },\n            {\n              text:\n                '此优惠券不与其他优惠券同时使用 此优惠券不与其他优惠券同时使用'\n            }\n          ],\n          start_time: '2019.11.1 00:00',\n          end_time: '2019.11.1 23:59',\n          status: 3 // 过期\n        }\n      ],\n      currentPage: 1,\n      showTime: false,\n      total: 1,\n\n      money: '', // 新建金额\n      radio: '全部', // 新建发送对象\n      impose: '', // 新建使用条件，最低消费金额\n      value1: '', // 新建固定日期 ,\n      month: '', // 新建有效天数\n      textarea: '', // 新建使用说明\n      loading:false,\n      listQuery: {\n        page: 1,\n        limit: 10,\n        status: 0,\n        title: '',\n        sstatus: 'all'\n      }\n    }\n  },\n  computed: {\n    ...mapGetters([\"userinfo\", \"brand\", \"group\"])\n  },\n  created() {\n    let temp = {}\n    GetDataByList(temp).then(res => {\n      this.group = res.data\n    })\n    this.getlist()\n  },\n  methods: {\n    clickDelete(row){\n      this.$confirm('此操作将永久删除该优惠卷, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n\n        let index=this.ticketList.indexOf(row);\n        // this.ticketList.splice(index,1);\n\n        GetIdByDelete(row.id).then(res=>{\n          this.ticketList[index].status=3\n          this.$message.success('删除成功');\n\n        })\n\n\n      }).catch(() => {\n\n\n      });\n\n    },\n    getlist() {\n      this.loading=true\n      GetcouponByList(this.listQuery).then(res => {\n        this.ticketList = res.data.data\n        this.total = res.data.total\n        this.loading=false\n      })\n    },\n    handleFilter() {\n      this.listQuery.page = 1;\n      this.getlist();\n    },\n\n    handleSizeChange(val) {\n      this.listQuery.limit = val;\n      this.getlist();\n    },\n    handleCurrentChange(val) {\n      this.listQuery.page = val;\n      this.getlist();\n    },\n\n    clickToSearch() {\n      const temp = {\n        sort: this.sortOpt,\n        status: this.statusOpt,\n        expir: this.expirOpt\n      }\n      console.log(temp)\n    },\n    clickTicket(item) {\n      if (item) {\n        this.curTicket = item\n      }\n      this.showTicket = !this.showTicket\n    },\n    clickToPickTime() {\n      this.showTime = !this.showTime\n    },\n    clickToNewTicket() {\n      this.headColse()\n    },\n    clickToRec() {\n      console.log(2)\n    },\n    clickToDelTicket() {\n      console.log(3)\n    },\n    clickToDelRec() {\n      console.log(4)\n    },\n    cilckNav(index) {\n      this.navindex = index\n    },\n    cilckPeriodid(index) {\n      this.periodid = index\n    },\n    headColse() {\n      this.showCoupon = !this.showCoupon\n    },\n    // 确定新建\n    headNewconfirm() {\n      this.postFrom.sender_id=this.userinfo.id\n      PostDataByAdd(this.postFrom).then(res => {\n        console.log(res)\n        this.postFrom={}\n        this.$message.success('新建完成')\n        this.getlist();\n      })\n      this.headColse()\n    },\n    headNewcancel() {\n      this.headColse()\n    }\n  }\n}\n",null]}