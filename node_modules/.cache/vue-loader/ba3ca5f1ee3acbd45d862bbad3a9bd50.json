{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/order/install/addOrder.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/order/install/addOrder.vue","mtime":1587402564000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n// import { CarBrand } from \"@/api/tools\";\nimport { Citylist } from \"@/api/city\";\n\nimport { getBrand, getSeries ,getModel} from '@/api/tools'\n\nimport { GetSaleByAll } from \"@/api/salesman\";\nimport ShList from \"@/components/shop/index\";\nimport { mapGetters } from \"vuex\";\nimport { GetDataByList, GetDataByShopAll } from \"@/api/shop\";\n\nimport { change, changeAll, del, delAll, PostDataByAdd } from \"@/api/order\";\n\nimport { GetecshopByList } from \"@/api/ecshop\";\nimport { getArrByKey, pickerOptions } from \"@/utils\";\nimport { GetProductByTree } from \"@/api/product\";\n\nconst defaultForm = {\n  logcontent: \"\",\n  openid: \"oQJN40ldFZYLvqoIZm3NGwFu8oKA\",\n  lazada_id: \"\",\n  lazada_list: \"\",\n  lazada_index: \"\",\n  buy_order_no: \"12123\",\n  buy_account: \"199\",\n  buy_product_id: \"\",\n  no_price: \"199\",\n  contact: \"梁泽祥\",\n  tel: \"18677947067\",\n  city_code: undefined,\n  city_desc: \"\",\n  number_plate: \"A871237\",\n  car_model: undefined,\n  car_index: \"\",\n  car_model_id: \"\"\n};\n\nexport default {\n  name: \"sendOrder\",\n  data() {\n    return {\n      shopname: \"\",\n      props: {\n        lazy: true,\n        lazyLoad(node, resolve) {\n          const { level } = node\n\n          if (level === 0) {\n            getBrand().then(res => {\n\n              var data = res.data\n\n              let nodes = []\n              for (let i = 0; i < data.length; i++) {\n                nodes.push({ label: data[i].name, value: data[i].brandid })\n              }\n              resolve(nodes)\n\n            })\n\n            // 通过调用resolve将子节点数据返回，通知组件数据加载完成\n          }\n          if (level === 1) {\n            getSeries(node.data.value).then(res => {\n              var data = res.data\n              let nodes = []\n              for (let i = 0; i < data.length; i++) {\n                nodes.push({ label: data[i].factory_name+' '+data[i].series_name, value: data[i].series_id })\n              }\n              resolve(nodes)\n\n            })\n\n            // 通过调用resolve将子节点数据返回，通知组件数据加载完成\n          }\n\n\n          if (level === 2) {\n            getModel(node.data.value).then(res => {\n              var data = res.data\n              let nodes = []\n              for (let i = 0; i < data.length; i++) {\n                nodes.push({ label: data[i].label, value: data[i].value ,leaf: level >= 2})\n              }\n              resolve(nodes)\n\n            })\n\n            // 通过调用resolve将子节点数据返回，通知组件数据加载完成\n          }\n          if(level===3){\n            let nodes=[];\n            resolve(nodes)\n          }\n        }\n      },\n      shopQuery: {\n        cityCode: undefined,\n        shopname: undefined,\n        page: 1,\n        limit: 10,\n        tel: undefined\n      },\n      innerVisible: false,\n      // dialogVisible: false,\n      checked: true,\n      tableKey: 0,\n      CarModellist: [], //车型数据\n      lazada: [], //所有平台\n      salesman: [], //所有业务员\n      holder: [\n        {\n          label: \"无\",\n          value: \"无\"\n        },\n        {\n          label: \"解码器\",\n          value: \"解码器\"\n        },\n        {\n          label: \"解码线组\",\n          value: \"解码线组\"\n        },\n        {\n          label: \"宝典到店\",\n          value: \"宝典到店\"\n        }\n      ], //支架\n      ygj: [\n        {\n          label: \"无\",\n          value: \"无\"\n        },\n        {\n          label: \"随机发\",\n          value: \"随机发\"\n        },\n        {\n          label: \"供应商代发\",\n          value: \"供应商代发\"\n        }\n      ], //易改件\n      device: [], //装置罩\n      carl: [],\n      list: null,\n      total: null,\n\n      // postFrom: Object.assign({}, defaultForm),\n      cityoptions: [], //地址\n      selectedRows: null,\n      listLoading: true,\n      showSearch: false,\n      options: [],\n      shop: [],\n      shoplist: [],\n      shoptotal: 0,\n      listQuery: {\n        page: 1,\n        limit: 10,\n        status: \"-1\",\n        title: \"\"\n      },\n      buttonDisabled: true,\n      deleting: false,\n      pickerOptions: pickerOptions,\n      currentIndex: -1,\n      productTree: [],\n      regionHiera: [],\n      rules: {\n        car_model: [{ required: true, message: \"请选择车型\", trigger: \"blur\" }],\n        openid: [\n          { required: true, message: \"请输入openid\", trigger: \"blur\" }\n          // {min: 2, max: 140, message: '长度在 2 到 140 个字符', trigger: 'blur'}\n        ],\n        buy_account: [\n          { required: true, message: \"请输入购买账号\", trigger: \"blur\" }\n        ],\n        lazada_list: [\n          { required: true, message: \"请选择购买平台\", trigger: \"blur\" }\n        ],\n        buy_product_id: [\n          { required: true, message: \"请选择购买产品\", trigger: \"blur\" }\n        ],\n        no_price: [\n          { required: true, message: \"请输入订单金额\", trigger: \"blur\" }\n        ],\n        contact: [{ required: true, message: \"请输入联系人\", trigger: \"blur\" }],\n        tel: [{ required: true, message: \"请输入联系电话\", trigger: \"blur\" }],\n        city_code: [{ required: true, message: \"请选择地址\", trigger: \"blur\" }],\n        city_desc: [\n          { required: true, message: \"请输入详细地址\", trigger: \"blur\" }\n        ],\n        number_plate: [\n          { required: true, message: \"请输入车牌号\", trigger: \"blur\" }\n        ]\n      }\n    };\n  },\n  computed: {\n    ...mapGetters([\"userinfo\", \"brand\"])\n  },\n  components: {\n    ShList\n  },\n  props: {\n    postFrom: {\n      type: Object,\n      default: function() {\n        return Object.assign({}, defaultForm);\n      }\n    },\n    Stitle: {\n      type: String,\n      default: \"\"\n    },\n    is_disabled: {\n      type: Boolean,\n      default: false\n    },\n    dialogVisible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  created() {\n    this.shopList();\n    Citylist().then(res => {\n      this.cityoptions = res.data;\n    });\n    GetProductByTree().then(res => {\n      this.productTree = res.data;\n    });\n    GetecshopByList().then(res => {\n      this.lazada = res.data;\n    });\n\n    GetSaleByAll().then(res => {\n      this.salesman = res.data;\n    });\n  },\n  methods: {\n    handleSizeChange(val) {\n      this.shopQuery.limit = val;\n      this.shopList();\n    },\n\n    handleStatusChange(val) {\n      this.shopQuery.page = 1;\n\n      this.shopList();\n    },\n    handleCurrentChange(val) {\n      this.shopQuery.page = val;\n      this.shopList();\n    },\n    handelToshop(row) {\n      this.postFrom.shop_id = row.id;\n      this.postFrom.shop_location = row.cityName + \" \" + row.location;\n      this.postFrom.shop_tel = row.tel;\n      this.innerVisible = !this.innerVisible;\n    },\n    shopList() {\n      GetDataByList(this.shopQuery).then(response => {\n        this.shoplist = response.data.data;\n        this.shoptotal = response.data.total;\n      });\n    },\n\n    handelInn() {\n      this.shop = [];\n      this.innerVisible = !this.innerVisible;\n    },\n    //所选门店\n\n    handleClose() {\n      this.$emit(\"handleClose\");\n    },\n    updateRow(type) {\n      var arr = this.postFrom;\n      this.$refs[\"postFrom\"].validate(valid => {\n        if (valid) {\n\n          this.postFrom.brand_id=this.postFrom.car_model[0]\n          this.postFrom.series_id=this.postFrom.car_model[1]\n          this.postFrom.model_id=this.postFrom.car_model[2]\n\n\n          this.postFrom.suit_id=this.postFrom.buy_product_id[0]\n\n          this.postFrom.product_id=this.postFrom.buy_product_id[1]\n\n          this.postFrom.city_code = this.postFrom.city_code.join(\",\");\n          this.postFrom.car_model = this.postFrom.car_model.join(\",\");\n          this.postFrom.lazada_list = this.postFrom.lazada_list.join(\",\");\n          this.postFrom.buy_product_id = this.postFrom.buy_product_id.join(\",\");\n\n          PostDataByAdd(this.postFrom).then(res => {\n            this.$emit(\"handleClose\");\n            this.postFrom = Object.assign({}, defaultForm);\n            this.postFrom = arr;\n          });\n        } else {\n          this.$message.error(\"请检测必填写项是否填写\");\n        }\n      });\n    }\n  },\n  mounted() {\n    console.log(this.userinfo);\n  }\n};\n",null]}