{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/shop/components/zichan.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/shop/components/zichan.vue","mtime":1587509703958},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n  GetShopByRunning,\n  GetIDByDetails,\n  PostDataBybalance,\n  PostbalanceByUpdate,\n  PostensureByUpdate\n} from '@/api/shop'\n\nexport default {\n  name: 'ZiChan',\n  props: {\n    id: {\n      type: String,\n      default: '0'\n    }\n  },\n  data() {\n    return {\n      ensureVisible: false,\n      ensure: {},\n      BackoffVisible: false,\n      shop: {},\n      total: 0,\n      listQuery: {\n        page: 1,\n        limit: 10,\n        status: 'all',\n        title: ''\n      },\n      returned: {\n        ins_cost: 0,\n        type: 1\n      },\n      balance: 0,\n      y_sum: 0,\n      ins_cost: 0,\n      set_cost: 0,\n\n      time: '',\n      content: '',\n      income: '',\n      outcome: '',\n      rowStyle: {\n        fontSize: '12px',\n        fontWeight: '400',\n        color: '#333'\n      },\n      headStyle: {\n        fontSize: '12px',\n        fontWeight: '500',\n        color: '#000'\n      },\n      tableData: [],\n      currentPage: 1\n    }\n  },\n  filters: {\n    sub(str) {\n      str = str.slice(0, 10)\n      return str\n    },\n    price_type(str) {\n      if (str === 1) {\n        str = '收入'\n      } else {\n        str = '支出'\n      }\n      return str\n    }\n  },\n  created() {\n    this.listQuery.id = this.id\n\n    this.getinfo()\n    this.fetchList()\n  },\n  methods: {\n    handelensure() {\n      this.ensureVisible = !this.ensureVisible\n    },\n    handelPostensure() {\n      this.ensure.shop_id = this.id\n\n      PostensureByUpdate(this.ensure).then(res => {\n        this.fetchList()\n        this.handelensure()\n\n      })\n    },\n    handeReturn() {\n      this.returned.shop_id = this.id\n\n      PostbalanceByUpdate(this.returned).then(res => {\n        this.fetchList()\n        this.handelbalance()\n        this.returned.ins_cost = 0\n        this.retainedRange.title = ''\n      })\n    },\n    handelbalance() {\n      this.BackoffVisible = !this.BackoffVisible\n      console.log('修改余额')\n    },\n    getinfo() {\n      GetIDByDetails(this.id).then(res => {\n        this.shop = res.data\n      })\n    },\n    handleFilterClear() {\n      this.listQuery.page = 1\n      this.fetchList()\n    },\n    fetchList() {\n      console.log('执行')\n\n      GetShopByRunning(this.listQuery).then(res => {\n        this.tableData = res.data.data\n        this.total = res.data.total\n        this.ensure_price = res.data.ensure_price\n        this.balance = res.data.balance\n        this.y_sum = res.data.y_sum\n        this.ins_cost = res.data.ins_cost\n        this.set_cost = res.data.set_cost\n      })\n    },\n\n    handleSizeChange(val) {\n      this.listQuery.limit = val\n      this.fetchList()\n      console.log(`每页 ${val} 条`)\n    },\n    handleCurrentChange(val) {\n      this.listQuery.page = val\n      this.fetchList()\n      console.log(`当前页: ${val}`)\n    },\n    clickToSearch() {\n      let temp = {\n        time: this.time,\n        content: this.content,\n        income: this.income,\n        outcome: this.outcome\n      }\n      console.log(temp)\n    }\n  }\n}\n",null]}