{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/shop/components/order/OrderInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/shop/components/order/OrderInfo.vue","mtime":1587402564000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { CarBrand } from '@/api/tools'\n\nimport { GetSaleByAll } from '@/api/salesman'\nimport { regionDataPlus } from 'element-china-area-data'\nimport { mapGetters } from 'vuex'\nimport { GetDataByShopAll } from '@/api/shop'\n\nimport { change, changeAll, del, delAll, GetDataByList, PostDataByAdd } from '@/api/order'\n\nimport { GetecshopByList } from '@/api/ecshop'\nimport { getArrByKey, pickerOptions } from '@/utils'\nimport { GetProductByTree } from '@/api/product'\n\nconst defaultForm = {\n  logcontent: '',\n  openid: 'oQJN40ldFZYLvqoIZm3NGwFu8oKA',\n  lazada_id: '',\n  lazada_list: '',\n  lazada_index: '',\n  buy_order_no: '12123',\n  buy_account: '199',\n  buy_product_id: '',\n  no_price: '199',\n  contact: '梁泽祥',\n  tel: '18677947067',\n  city_code: undefined,\n  city_desc: '',\n  number_plate: 'A871237',\n  car_model: undefined,\n  car_index: '',\n  car_model_id: ''\n}\n\nexport default {\n  name: 'sendOrder',\n  data() {\n    return {\n      shopQuery: {\n        cityCode: undefined,\n        shopname: undefined,\n        tel: undefined\n      },\n      innerVisible: false,\n      // dialogVisible: false,\n      checked: true,\n      tableKey: 0,\n      CarModellist: [],//车型数据\n      lazada: [],//所有平台\n      salesman: [],//所有业务员\n      holder: [\n        {\n          label: '无',\n          value: 1\n        },\n        {\n          label: '解码器',\n          value: 2\n        },\n        {\n          label: '解码线组',\n          value: 3\n        },\n        {\n          label: '宝典到店',\n          value: 4\n        }\n\n      ],//支架\n      ygj: [\n        {\n          label: '无',\n          value: 1\n        },\n        {\n          label: '随机发',\n          value: 2\n        },\n        {\n          label: '供应商代发',\n          value: 3\n        }\n      ],//易改件\n      device: [],//装置罩\n      carl: [],\n      list: null,\n      total: null,\n\n      // postFrom: Object.assign({}, defaultForm),\n      cityoptions: regionDataPlus,//地址\n      selectedRows: null,\n      listLoading: true,\n      showSearch: false,\n      options: [],\n      shop: [],\n      listQuery: {\n        page: 1,\n        limit: 10,\n        status: '-1',\n        title: ''\n      },\n      buttonDisabled: true,\n      deleting: false,\n      pickerOptions: pickerOptions,\n      currentIndex: -1,\n      productTree: [],\n      regionHiera: []\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'userinfo',\n      'brand'\n    ])\n  },\n  props: {\n    postFrom: {\n      type: Object,\n      default: function() {\n        return Object.assign({}, defaultForm)\n      }\n    },\n    Stitle: {\n      type: String,\n      default: ''\n    },\n    is_disabled: {\n      type: Boolean,\n      default: true\n\n    },\n    dialogVisible: {\n      type: Boolean,\n      default: false\n    }\n\n  },\n  created() {\n    if (this.brand === undefined) {\n      CarBrand().then(res => {\n        this.regionHiera = res.data\n      })\n    } else {\n      this.regionHiera = this.brand\n    }\n    GetProductByTree().then(res => {\n      this.productTree = res.data\n    })\n    GetecshopByList().then(res => {\n      this.lazada = res.data\n    })\n    GetDataByShopAll().then(res => {\n      this.shop = res.data\n    })\n\n    GetSaleByAll().then(res => {\n      this.salesman = res.data\n    })\n  },\n  methods: {\n\n    //所选门店\n    handleShop(e) {\n\n      this.postFrom.shop_id = e\n      for (let i = 0; i < this.shop.length; i++) {\n        if (e === this.shop[i].id) {\n          this.postFrom.shop_location = this.shop[i].cityName + ' ' + this.shop[i].location\n          this.postFrom.shop_tel = this.shop[i].tel\n          return\n        }\n      }\n    },\n    handleClose() {\n      this.$emit('handleInfoClose')\n    },\n    updateRow(type) {\n      this.postFrom.city_code = this.postFrom.city_code.join(',')\n      this.postFrom.car_model = this.postFrom.car_model.join(',')\n      this.postFrom.lazada_list = this.postFrom.lazada_list.join(',')\n      this.postFrom.buy_product_id = this.postFrom.buy_product_id.join(',')\n      if (this.postFrom.status === '待处理') {\n        this.postFrom.status = 1\n        this.postFrom.pre_sales = this.userinfo.id\n        console.log(this.postFrom)\n        this.postFrom.logcontent = '待确认(业务员)' + ' ' + this.userinfo.realName + '派单 ' + ' ' + '已通知'\n      }\n      if (this.postFrom.status === '重新派单') {\n        this.postFrom.status = 1\n        this.postFrom.logcontent = '待确认(业务员)' + ' ' + this.userinfo.realName + '重新派单 ' + ' ' + '已通知'\n      }\n      if (this.postFrom.status === '待确认(业务)') {\n        this.postFrom.status = 2\n        this.postFrom.logcontent = '待确认(门店)' + ' ' + this.userinfo.realName + '同意派单,'\n      }\n\n      if (this.postFrom.status === '待确认(门店)') {\n        this.postFrom.status = 3\n        this.postFrom.logcontent = '待安装' + ' ' + this.userinfo.realName + '已接单,'\n      }\n      if (this.postFrom.status === '待安装') {\n        this.postFrom.status = 4\n\n        this.postFrom.logcontent = '已安装' + ' ' + this.userinfo.realName + '安装完成,'\n\n      }\n      if (this.postFrom.status === '已安装') {\n        this.postFrom.status = 5\n        this.postFrom.after_sale = this.userinfo.id\n        this.postFrom.logcontent = '财审1' + ' ' + this.userinfo.realName + '确认安装,'\n\n      }\n      if (this.postFrom.status === '财审1') {\n        this.postFrom.status = 6\n        this.postFrom.logcontent = '财审2' + ' ' + this.userinfo.realName + '审核通过,'\n\n      }\n      if (this.postFrom.status === '财审2') {\n        this.postFrom.status = 7\n        this.postFrom.logcontent = '待结算' + ' ' + this.userinfo.realName + '结算通过,'\n      }\n      if (this.postFrom.status === '待结算') {\n        this.postFrom.status = 8\n        this.postFrom.is_pay = type\n        if (type === 1) {\n          this.postFrom.logcontent = '已结算' + ' ' + this.userinfo.realName + '结算微信支付,'\n        }\n        if (type === 2) {\n          this.postFrom.logcontent = '已结算' + ' ' + this.userinfo.realName + '结算挂帐,'\n        }\n\n      }\n\n      PostDataByAdd(this.postFrom).then(res => {\n        this.$emit('handleClose')\n\n        this.postFrom = Object.assign({}, defaultForm)\n        this.postFrom.city_code = this.postFrom.city_code.splice(',')\n        this.postFrom.car_model = this.postFrom.car_model.splice(',')\n      })\n    }\n  },\n  mounted() {\n    console.log(this.userinfo)\n  }\n}\n",null]}