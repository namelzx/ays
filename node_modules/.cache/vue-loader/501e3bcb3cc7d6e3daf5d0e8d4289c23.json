{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/manage/info.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/manage/info.vue","mtime":1587402564000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n// import Upload from '@/components/Upload/image'\nimport { modify } from '@/api/admin'\nimport { mapGetters } from 'vuex'\nimport store from '@/store'\nimport myconfig from '@/config'\n\nexport default {\n  name: 'MyInfo',\n  // components: { Upload },\n  data() {\n    return {\n      btnLoading: false,\n      temp: {\n        password: '',\n        realName: store.getters.realName,\n        phone: store.getters.phone,\n        email: store.getters.email,\n        img: [store.getters.avatar]\n      },\n      config: {\n        fileName: 'img',\n        limit: 1,\n        multiple: true,\n        accept: 'image/*',\n        action: myconfig.uploadUrl.img\n      }\n\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'name',\n      'group'\n    ])\n  },\n  watch: {\n    temp: {\n      handler(newVal, oldVal) {},\n      immediate: true,\n      deep: true\n    }\n  },\n  created() {\n\n  },\n  destroyed() {\n\n  },\n  methods: {\n    saveData() {\n      this.btnLoading = true\n      this.$refs['dataForm'].validate((valid) => {\n        if (valid) {\n          const _this = this\n          const d = this.temp\n          if (typeof (d.img) === 'object') {\n            d.img = d.img.join(',')\n          }\n          modify(d).then(response => {\n            if (response.status === 1) {\n              store.commit('SET_AVATAR', _this.temp.img)\n              store.commit('SET_REALNAME', _this.temp.realName)\n              store.commit('SET_PHONE', _this.temp.phone)\n              store.commit('SET_EMAIL', _this.temp.email)\n              _this.$message.success(response.msg)\n            } else {\n              _this.$message.error(response.msg)\n            }\n            _this.btnLoading = false\n          }).catch((error) => {\n            this.btnLoading = false\n          })\n        } else {\n          this.btnLoading = false\n        }\n      })\n    }\n  }\n}\n",null]}