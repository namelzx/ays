{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/cost/install/OrderInfocost.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/cost/install/OrderInfocost.vue","mtime":1588139432742},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport DetailsInfo from './info/operationinfo'\nimport DetailsPrint from './info/operatprint'\n// import InstallInfo from \"./info/install\";\n\nimport Timeline from './info/timeline'\nimport returnVisit from './info/returnVisit'\n\nimport {\n    GetIdByOrderLog,\n    GetTypeBySale,\n    PostDataBySale,\n    GetIdByinstaOrderLog\n} from '@/api/costorder'\n\nimport Upload from '@/components/Upload/uploadList'\n\nimport config from '@/config'\nimport {mapGetters} from 'vuex'\n\nexport default {\n    name: 'Info',\n\n    computed: {\n        ...mapGetters(['userinfo', 'brand', 'group'])\n    },\n    components: {\n        DetailsInfo,\n        Timeline,\n        DetailsPrint,\n        returnVisit,\n        Upload\n    },\n    props: {\n        postFrom: {\n            type: Object,\n            default: function () {\n                return {}\n            }\n        },\n        infodialogVisible: {\n            type: Boolean,\n            default: false\n        },\n        Stitle: {\n            type: String,\n            default: '费用单详情'\n        }\n    },\n    data() {\n        return {\n            activeName: \"payinstall\",\n            permissions: [], // 权限组\n\n            reTitle: '',\n            sale: [],\n\n            returninnerVisible: false,\n            content: '',\n            img: [],\n            activeName: 'install',\n            loglist: [],\n            config: {\n                fileName: 'file',\n                limit: 5,\n                multiple: false,\n                accept: 'image/*',\n                action: config.uploadUrl.img,\n                drag: false\n            },\n            imglist: [],\n            videolist: []\n        }\n    },\n    created() {\n        this.permissions = this.group.btn.split(',')\n\n        if (this.postFrom.imglist) {\n            this.imglist = this.postFrom.imglist.split(',')\n        }\n        if (this.postFrom.videolist) {\n            this.videolist = this.postFrom.videolist.split(',')\n        }\n        GetIdByOrderLog(this.postFrom.id).then(res => {\n            this.loglist = res.data\n        })\n    },\n    methods: {\n        handelPirintin() {\n            let subOutputRankPrint = document.getElementById('print');\n            console.log(subOutputRankPrint.innerHTML)\n            let newContent = subOutputRankPrint.innerHTML\n            let oldContent = document.body.innerHTML\n            let bdhtml = window.document.body.innerHTML;\n            let sprnstr = \"<!--startprint-->\";\n            let eprnstr = \"<!--endprint-->\";\n            let prnhtml = bdhtml.substr(bdhtml.indexOf(sprnstr) + 17);\n            prnhtml = prnhtml.substr(0, prnhtml.indexOf(eprnstr));\n            window.document.body.innerHTML = prnhtml;\n            document.body.innerHTML = newContent\n            window.print();\n            window.location.reload();\n            document.body.innerHTML = oldContent;\n            return false;\n        },\n        handelRuimg() {\n        },\n\n        rolesbtn(val) {\n            var index = this.permissions.indexOf(val)\n            if (index > -1) {\n                return true\n            } else {\n                return false\n            }\n        },\n        // 添加售后数据\n        handelContent() {\n            var data = {\n                content: this.content,\n                img: this.img.join('|'),\n                type: this.activeName,\n                order_id: this.postFrom.id\n            }\n            PostDataBySale(data).then(res => {\n                console.log(res)\n                this.getsale()\n                this.returninnerVisible = !this.returninnerVisible\n            })\n        },\n\n        getsale() {\n            var temp = {\n                order_id: this.postFrom.id,\n                type: this.activeName\n            }\n            GetTypeBySale(temp).then(res => {\n                // this.sale=res.data\n                var arr = []\n                for (let i = 0; i < res.data.length; i++) {\n                    arr[i] = res.data[i]\n                    arr[i].img = res.data[i].img.split('|')\n                }\n                this.sale = arr\n            })\n        },\n        // 组件图片上传\n        handelRuimg(row) {\n            this.img = row\n            console.log(row)\n        },\n        handleClose() {\n            this.$emit('handelInfoDialog', !this.infodialogVisible)\n        },\n        handleClick(tab, event) {\n            //\n\n\n            if (tab.paneName === 'instalog') {\n                this.loglist = []\n                GetIdByinstaOrderLog(this.postFrom.order_id).then(res => {\n                    this.loglist = res.data\n                })\n            }\n\n            if (tab.paneName === 'return') {\n                this.getsale()\n            }\n            console.log('售后服务')\n\n            if (tab.paneName === 'sales') {\n                this.getsale()\n            }\n        }\n    }\n}\n",null]}