{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/shop/help.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/shop/help.vue","mtime":1594474457681},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {GetDataByList, updateStatus, deleteHomeAdvertise} from '@/api/help';\n\nconst defaultListQuery = {\n    limit: 20,\n    page: 1,\n    name: null,\n    type: null,\n    endTime: null\n};\nconst defaultTypeOptions = [\n    {\n        label: 'PC首页轮播',\n        value: 0\n    },\n    {\n        label: 'APP首页轮播',\n        value: 1\n    }\n];\nexport default {\n    name: 'homeAdvertiseList',\n    data() {\n        return {\n            listQuery: Object.assign({}, defaultListQuery),\n            typeOptions: Object.assign({}, defaultTypeOptions),\n            list: null,\n            total: null,\n            listLoading: false,\n            multipleSelection: [],\n            operates: [\n                {\n                    label: \"删除\",\n                    value: 0\n                }\n            ],\n            operateType: null\n        }\n    },\n    created() {\n        this.getList();\n    },\n    filters: {\n        formatType(type) {\n            if (type === 1) {\n                return 'APP首页轮播';\n            } else {\n                return 'PC首页轮播';\n            }\n        },\n        formatTime(time) {\n            if (time == null || time === '') {\n                return 'N/A';\n            }\n            let date = new Date(time);\n            return formatDate(date, 'yyyy-MM-dd hh:mm:ss')\n        },\n    },\n    methods: {\n        handleResetSearch() {\n            this.listQuery = Object.assign({}, defaultListQuery);\n        },\n        handleSearchList() {\n            this.listQuery.pageNum = 1;\n            this.getList();\n        },\n        handleSelectionChange(val) {\n            this.multipleSelection = val;\n        },\n        handleSizeChange(val) {\n            this.listQuery.pageNum = 1;\n            this.listQuery.pageSize = val;\n            this.getList();\n        },\n        handleCurrentChange(val) {\n            this.listQuery.pageNum = val;\n            this.getList();\n        },\n        handleUpdateStatus(index, row) {\n            this.$confirm('是否要修改置顶状态?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                var temp = {\n                    id: row.id,\n                    status: row.status\n                }\n                if(row.status===1){\n                    temp.status=0\n                }else{\n                    temp.status=1\n                }\n\n                updateStatus(temp).then(response => {\n                    this.getList();\n                    this.$message({\n                        type: 'success',\n                        message: '修改成功!'\n                    });\n                });\n            }).catch(() => {\n                this.$message({\n                    type: 'success',\n                    message: '已取消操作!'\n                });\n                this.getList();\n            });\n        },\n        handleDelete(index, row) {\n            this.deleteHomeAdvertise(row.id);\n        },\n        handleBatchOperate() {\n            if (this.multipleSelection < 1) {\n                this.$message({\n                    message: '请选择一条记录',\n                    type: 'warning',\n                    duration: 1000\n                });\n                return;\n            }\n            let ids = [];\n            for (let i = 0; i < this.multipleSelection.length; i++) {\n                ids.push(this.multipleSelection[i].id);\n            }\n            if (this.operateType === 0) {\n                //删除\n                this.deleteHomeAdvertise(ids);\n            } else {\n                this.$message({\n                    message: '请选择批量操作类型',\n                    type: 'warning',\n                    duration: 1000\n                });\n            }\n        },\n        handleAdd() {\n            this.$router.push({path: '/shop/help/edit'})\n        },\n        handleUpdate(index, row) {\n            this.$router.push({path: '/shop/help/edit/' + row.id})\n        },\n        getList() {\n            this.listLoading = true;\n            GetDataByList(this.listQuery).then(response => {\n                this.listLoading = false;\n                this.list = response.data.data;\n                console.log(response.data)\n                this.total = response.data.total;\n            })\n        },\n        deleteHomeAdvertise(ids) {\n            this.$confirm('是否要删除该广告?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                let params = new URLSearchParams();\n                params.append(\"ids\", ids);\n                deleteHomeAdvertise(params).then(response => {\n                    this.getList();\n                    this.$message({\n                        type: 'success',\n                        message: '删除成功!'\n                    });\n                });\n            })\n        }\n    }\n}\n",null]}