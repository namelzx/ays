{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/marketing/components/components/CrmRelativeTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/marketing/components/components/CrmRelativeTable.vue","mtime":1587402564000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { GetDataByList, GetDataByShopAll } from '@/api/shop'\n\nimport { PostDataByAddShop, GetShopByVal, GetDataShopByList } from '@/api/shopgroup'\n\nexport default {\n  props: {\n    group_id: Number,\n    val: String\n  },\n  data() {\n    return {\n      vadata: [],\n      listQuery: {\n        page: 1,\n        limit: 5,\n        title: ''\n      },\n      loading: false,\n      total: 0,\n      slist: [],\n      fieldList: [\n        { name: '门店名称', field: 'shopname' },\n        { name: '店主', field: 'shopkeeper' },\n        { name: '所在城市', field: 'cityName' }\n      ],\n\n      multipleSelection: []\n    }\n  },\n  created() {\n\n    this.toggleSelection([])\n    console.log('11')\n    this.shopList()\n\n  },\n  methods: {\n    handelCreate() {\n      let shop_id = ''\n      for (let i = 0; i < this.multipleSelection.length; i++) {\n        if (i > 0) {\n          shop_id = shop_id + ',' + this.multipleSelection[i].id\n        } else {\n          shop_id = this.multipleSelection[i].id\n        }\n      }\n      var temp = {\n        id: this.group_id,\n        val: this.val + ',' + shop_id\n      }\n      PostDataByAddShop(temp).then(res => {\n        this.$emit('handleCloseShop', temp.val)\n      })\n    },\n\n    handleSizeChange(val) {\n      this.listQuery.limit = val\n      this.shopList()\n\n    },\n    //某航选中事件\n    handleRowClick(row, column, event) {\n    },\n    handleStatusChange(val) {\n      this.listQuery.page = 1\n\n      this.shopList()\n    },\n    handleCurrentChange(val) {\n      this.listQuery.page = val\n      this.shopList()\n    },\n    shopList() {\n      var that = this\n      this.loading = true\n      this.listQuery.val = this.val\n      //获得全部店铺\n\n      GetDataShopByList(this.listQuery).then(response => {\n        this.slist = response.data.data\n        this.total = response.data.total\n        this.loading = false\n        //获取已选店铺\n        if (this.val) {\n          GetShopByVal(this.val).then(res => {\n            this.vadata = res.data.data\n\n            var arr = []\n            for (let k = 0; k < this.vadata.length; k++) {\n\n              for (let i = 0; i < this.slist.length; i++) {\n\n                if (this.slist[i].id === this.vadata[k].id) {\n                  console.log(i)\n                  console.log(this.slist[i].id, this.vadata[k].id)\n                  arr.push(this.slist[i])\n                }\n              }\n            }\n            this.toggleSelection(arr)\n          })\n        }\n      })\n    },\n    toggleSelection(rows) {\n      if (rows) {\n        rows.forEach(row => {\n          this.$refs.multipleTable.toggleRowSelection(row)\n        })\n      } else {\n        this.$refs.multipleTable.clearSelection()\n      }\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val\n\n    },\n    checkItemsWithSelectedData() {\n\n    }\n  }\n}\n",null]}