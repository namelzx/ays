{"remainingRequest":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangzexiang/WebstormProjects/ays/src/views/marketing/components/shop.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangzexiang/WebstormProjects/ays/src/views/marketing/components/shop.vue","mtime":1587402564000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangzexiang/WebstormProjects/ays/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n  GetDataByList,\n  GetIdByDelete,\n  PostDataByAdd,\n  PostDataByUpSort,\n  GetGroupByList,\n  PostDataByAddShop\n} from '@/api/shopgroup'\n\nimport CrmRelativeTable from './components/CrmRelativeTable'\n\nexport default {\n  name: 'shop',\n  data() {\n    return {\n      shop_id: undefined,\n      show: false,\n      oneindex: 0,\n      list: [],\n      val: '',\n      shop: [],\n      group_id: undefined\n    }\n  },\n  components: {\n    CrmRelativeTable\n  },\n  created() {\n    this.getgroup()\n  },\n  methods: {\n    handelshop(item) {\n      this.shop_id = item.id\n    },\n\n    oneChange(row) {\n      row.is_edit = 1\n      PostDataByAdd(row).then(res => {\n        row.id = res.data.id\n        setTimeout(function({}) {\n          this.getgroup()\n        }, 1000)\n\n      })\n\n    },\n    getgroup() {\n      var temp = {}\n      GetDataByList(temp).then(res => {\n        console.log(res)\n        this.list = res.data\n      })\n    },\n    handleClose() {\n      this.show = false\n      this.shop = []\n      this.getgroup()\n    },\n    handleCloseShop(val) {\n      this.$message.success('添加成功')\n      GetGroupByList(val).then(res => {\n        this.shop = res.data\n        this.show = false\n        this.getgroup()\n        console.log(this.shop)\n      })\n    },\n    handelAdd() {\n      console.log(1)\n      this.list.push({ name: '12', is_edit: 2 })\n    },\n\n    handelClick(row) {\n      row.is_edit = 1\n      this.group_id = row.id\n      this.val = row.val\n      if (this.val) {\n        GetGroupByList(row.val).then(res => {\n          this.shop = res.data\n        })\n      }else{\n        this.shop=[];\n      }\n      this.oneindex = row.id\n    },\n    Delete(row) {\n      const index = this.list.indexOf(row)\n      this.list.splice(index, 1)\n\n      if (row.id) {\n        GetIdByDelete(row).then(res => {\n          this.shop=[];\n          this.group_id=undefined;\n          this.val=undefined\n        })\n      }\n    },\n    DeleteShop(row) {\n      const index = this.shop.indexOf(row)\n      this.shop.splice(index, 1)\n      let shop_id = ''\n      for (let i = 0; i < this.shop.length; i++) {\n        if (i > 0) {\n          shop_id = shop_id + ',' + this.shop[i].id\n        } else {\n          shop_id = this.shop[i].id\n        }\n      }\n      var temp = {\n        id: this.group_id,\n        val: shop_id\n      }\n      PostDataByAddShop(temp).then(res => {\n        this.getgroup()\n      })\n\n    },\n    handelEdit(row) {\n      row.is_edit = 2\n    }\n\n  }\n}\n",null]}