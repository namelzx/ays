(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e8d2b62"],{4:function(e,t){},5:function(e,t){},"733c":function(e,t,i){},"7c1f":function(e,t,i){"use strict";var a=i("733c"),n=i.n(a);n.a},"9b1c":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main"},[i("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"25%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-dialog",{attrs:{width:"30%",title:"补充内容",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[i("el-form",{attrs:{model:e.postdata}},[i("el-form-item",{attrs:{label:"标题"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.postdata.title,callback:function(t){e.$set(e.postdata,"title",t)},expression:"postdata.title"}})],1),e._v(" "),"图文"===e.datafrom.type?i("el-form-item",{attrs:{label:"链接地址"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.postdata.link_url,callback:function(t){e.$set(e.postdata,"link_url",t)},expression:"postdata.link_url"}})],1):e._e(),e._v(" "),i("el-row",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.downloadZip}},[e._v("下载\n                    ")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.innerVisible=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),e._l(e.video,(function(t,a){return"视频"==e.datafrom.type?i("div",{key:a,staticClass:"video"},[i("video",{staticStyle:{width:"200px",height:"100px"},attrs:{src:t.url,controls:"controls"}})]):e._e()})),e._v(" "),e._l(e.datafrom.imagetext,(function(t,a){return"图文"==e.datafrom.type?i("div",{key:a,staticClass:"video"},[i("el-image",{attrs:{src:t}})],1):e._e()})),e._v(" "),i("div",{staticClass:"vi-bootm"},[i("el-row",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.ToheadDownload}},[e._v("下载\n                ")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.handleClose}},[e._v("取消")])],1)],1)],2)],1)},n=[],r=(i("5df3"),i("2d63")),l=(i("ac6a"),i("b7be")),s=(i("ed08"),i("7c39")),o=i.n(s),d=i("21a6"),m=i.n(d),u={name:"instal",data:function(){return{innerVisible:!1,postdata:{},listQuery:{order_id:null,page:1,limit:10,startTime:void 0,sstatus:"all"},total:0,total1:0,total2:0,total3:0,listLoading:!0,tableData:[],dialogVisible:!1,video:[],title:"",is_video_status:void 0,order_id:void 0,datafrom:{}}},filters:{StrText:function(e){return 1===e?"已处理":"待处理"}},created:function(){},methods:{handleClose:function(){this.dialogVisible=!1},handleEdit:function(e){this.title=e.order_id+"-推广详情"+e.type+"-处理",this.dialogVisible=!0,this.video=e.video,this.datafrom=e,this.is_video_status=e.is_video_status,this.order_id=e.id},open:function(){this.$message({message:"请先选中视频！",type:"warning"})},open2:function(){this.$message({message:"恭喜你，已开始下载！",type:"success"})},open4:function(){this.$message.error("下载视频，请重新下载。")},ToheadDownload:function(){this.innerVisible=!0},downloadZip:function(){var e=this,t=this.datafrom.video,i=this.datafrom.imagetext,a=[],n=this.datafrom.type,r=0;if("视频"===n){if(void 0===this.postdata.title||""===this.postdata.title)return void this.$message.error("标题不能为空");if(0===t.length)return void this.$message.error("无数据下载");t.forEach((function(e){r++;var t=Date.parse(new Date);a.push({fileUrl:e.url,renameFileName:e.order_id+t+r+".mp4"})})),this.filesToRar(a,"案例打包");var s={id:this.datafrom.id,filed:"status",status:1,title:"下载视频案例",totitle:this.postdata.title};Object(l["f"])(s).then((function(t){2e4===t.code?(e.dialogVisible=!1,e.innerVisible=!1,e.$emit("handleUpdate"),e.open2()):e.open4()}))}if("图文"===n){if(void 0===this.postdata.title||""===this.postdata.title)return void this.$message.error("标题不能为空");if(void 0===this.postdata.link_url||""===this.postdata.link_url)return void this.$message.error("链接不能为空");a=[{fileUrl:i.passing_light_qt,renameFileName:"近光墙图.jpg"},{fileUrl:i.front,renameFileName:"车辆正面.jpg"},{fileUrl:i.distance_light_qt,renameFileName:"远光近墙图.jpg"},{fileUrl:i.product,renameFileName:"产品配置图.jpg"},{fileUrl:i.other_one,renameFileName:"其他1.jpg"},{fileUrl:i.assembly,renameFileName:"总成.jpg"},{fileUrl:i.vehiclebreaking,renameFileName:"拆车后.jpg"},{fileUrl:i.coating,renameFileName:"总成覆膜图.jpg"},{fileUrl:i.open_assembly,renameFileName:"开总成图.jpg"},{fileUrl:i.gelresin,renameFileName:"清胶图.jpg"},{fileUrl:i.lens,renameFileName:"透镜安装.jpg"},{fileUrl:i.situdimming,renameFileName:"原位调光图.jpg"},{fileUrl:i.inject_glue,renameFileName:"注胶过程图.jpg"},{fileUrl:i.truck_loading,renameFileName:"装车图.jpg"},{fileUrl:i.other_tow,renameFileName:"其他2.jpg"},{fileUrl:i.rear_passing_light_qt,renameFileName:"安装后近光墙.jpg"},{fileUrl:i.rear_front,renameFileName:"正面.jpg"},{fileUrl:i.rear_distance_light_qt,renameFileName:"远光后.jpg"},{fileUrl:i.rear_light_feature,renameFileName:"车灯特写.jpg"},{fileUrl:i.rear_passing_light_way,renameFileName:"近光照路.jpg"},{fileUrl:i.rear_distance_light_way,renameFileName:"远光照路.jpg"},{fileUrl:i.other_tow_three,renameFileName:"其他三.jpg"}];var o=Date.parse(new Date);this.filesToRar(a,"案例打包"+o);var d={id:this.datafrom.id,filed:"status",status:1,title:"下载图文案例",totitle:this.postdata.title,link_url:this.postdata.link_url};Object(l["f"])(d).then((function(t){2e4===t.code?(e.dialogVisible=!1,e.innerVisible=!1,e.$emit("handleUpdate"),e.open2()):e.open4()}))}},filesToRar:function(e,t){var i=this,a=new o.a,n={},l=[];i.title="正在加载压缩文件";var s,d=Object(r["a"])(e);try{var u=function(){var e=s.value,t=i.getImgArrayBuffer(e.fileUrl).then((function(t){a.file(e.renameFileName,t,{binary:!0}),n[e.renameFileName]=t}));l.push(t)};for(d.s();!(s=d.n()).done;)u()}catch(f){d.e(f)}finally{d.f()}Promise.all(l).then((function(){a.generateAsync({type:"blob"}).then((function(e){i.title="正在压缩",m.a.saveAs(e,t),i.title="压缩完成"}))})).catch((function(e){i.$message.error("文件压缩失败")}))},getImgArrayBuffer:function(e){return new Promise((function(t,i){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="blob",a.onload=function(){200==this.status?t(this.response):i(this.status)},a.send()}))}}},f=u,c=(i("7c1f"),i("2877")),p=Object(c["a"])(f,a,n,!1,null,"12bd3207",null);t["default"]=p.exports},b7be:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"f",(function(){return r})),i.d(t,"b",(function(){return l})),i.d(t,"d",(function(){return s}));var a=i("b775");function n(e){return Object(a["a"])({url:"/admin/Marketing/GetDataByList",method:"get",params:e})}function r(e){return Object(a["a"])({url:"/admin/Marketing/PostStatusByData",method:"post",params:e})}function l(e){return Object(a["a"])({url:"/admin/Shopdemand/GetDataByShopDemanList",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/admin/Shopdemand/PostDataByUpdate",method:"get",params:{id:e}})}}}]);