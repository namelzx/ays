(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fe7ffa1"],{"277e":function(t,i,e){"use strict";e.d(i,"e",(function(){return d})),e.d(i,"f",(function(){return n})),e.d(i,"g",(function(){return o})),e.d(i,"h",(function(){return r})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return s})),e.d(i,"d",(function(){return c})),e.d(i,"b",(function(){return u}));var l=e("b775");function d(t){return Object(l["a"])({url:"admin/Permissions/index",method:"post",data:t})}function n(){return Object(l["a"])({url:"/admin/Permissions/getLists",method:"post"})}function o(t){return Object(l["a"])({url:"/admin/Permissions/getinfo",method:"get",params:{id:t}})}function r(t){return Object(l["a"])({url:"/admin/Permissions/save",method:"post",data:t})}function a(t){return Object(l["a"])({url:"/admin/Permissions/del",method:"get",params:{id:t}})}function s(t,i,e){var d={val:t,field:i,value:e};return Object(l["a"])({url:"/admin/Permissions/change",method:"post",data:d})}function c(t){return Object(l["a"])({url:"/admin/Permissions/delall",method:"post",data:t})}function u(t){return Object(l["a"])({url:"/admin/Permissions/changeall",method:"post",data:t})}},"2c15":function(t,i,e){},8433:function(t,i,e){"use strict";e.r(i);var l=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("el-dialog",{attrs:{width:"60%",title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(i){t.dialogFormVisible=i}}},[e("el-form",{ref:"dataForm",staticStyle:{width:"100%",height:"50vh","overflow-y":"scroll"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"100px"}},[e("el-form-item",{attrs:{label:"岗位名称",prop:"title"}},[e("el-input",{attrs:{clearable:""},model:{value:t.temp.title,callback:function(i){t.$set(t.temp,"title",i)},expression:"temp.title"}})],1),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"md"},[e("el-collapse",{model:{value:t.activeNames,callback:function(i){t.activeNames=i},expression:"activeNames"}},[e("el-checkbox-group",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckedCitiesChange},model:{value:t.checkList,callback:function(i){t.checkList=i},expression:"checkList"}},t._l(t.getPremiss,(function(i,l){return e("el-collapse-item",{attrs:{name:i.name}},[e("span",{staticClass:"collapse-title",attrs:{slot:"title"},slot:"title"},[i.title?e("el-checkbox",{attrs:{label:i.id}},[t._v(t._s(i.title))]):t._e()],1),t._v(" "),t._l(i.children,(function(i,l){return e("div",{staticClass:"ch-2"},[i.title?e("el-checkbox",{attrs:{label:i.id}},[t._v(t._s(i.title))]):t._e(),t._v(" "),i.roles?e("el-checkbox-group",{model:{value:t.rolesList,callback:function(i){t.rolesList=i},expression:"rolesList"}},t._l(i.roles,(function(l,d){return i.roles?e("div",{staticClass:"o-2-or"},[e("div",{staticClass:"or-title"},[e("el-checkbox",[t._v(t._s(l.title))])],1),t._v(" "),e("div",{staticClass:"or-child-item"},t._l(l.children,(function(i,l){return e("div",{staticClass:"or-child"},[e("el-checkbox",{attrs:{label:i.id}},[t._v(t._s(i.title))])],1)})),0)]):t._e()})),0):t._e(),t._v(" "),t._l(i.children,(function(l,d){return i.children?e("div",[e("el-checkbox",{attrs:{label:l.id}},[t._v(t._s(l.title))])],1):t._e()}))],2)}))],2)})),1)],1)],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(i){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),e("el-button",{attrs:{loading:t.btnLoading,type:"primary"},on:{click:function(i){return t.saveData()}}},[t._v("保存")])],1)],1)},d=[],n=(e("28a5"),e("bd43")),o=e("277e"),r=e("f382"),a={name:"RolesForm",data:function(){return{loading:!0,checkList:[],rolesList:[],activeNames:void 0,btnLoading:!1,ruleList:[],checked:!0,temp:{id:0,title:"",status:1,rules:""},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"添加"},rules:{title:[{required:!0,message:"名称必填",trigger:"blur"}]},isIndeterminate:!0,defaultChecked:[],defaultProps:{children:"children",label:"title"}}},computed:{getRulesList:function(){return r["a"].listToTreeMulti(this.ruleList)},getPremiss:function(){for(var t=r["a"].listToTreeMulti(this.ruleList),i=0;i<t.length;i++)for(var e=t[i].children,l=0;l<e.length;l++)67===e[l].id&&(e[l].roles=[],e[l].roles[0]={title:"全部订单",children:[{id:"o-"+e[l].id+"-1",title:"查询"},{id:"o-"+e[l].id+"-2",title:"删除"},{id:"o-"+e[l].id+"-3",title:"新增"},{id:"o-"+e[l].id+"-4",title:"导出"},{id:"o-"+e[l].id+"-5",title:"修改"},{id:"o-"+e[l].id+"-6",title:"回访查看"},{id:"o-"+e[l].id+"-7",title:"回访编辑"},{id:"o-"+e[l].id+"-8",title:"售后查看"},{id:"o-"+e[l].id+"-9",title:"售后编辑"},{id:"o-"+e[l].id+"-10",title:"驳回"}]},e[l].roles[1]={title:"环节订单",children:[{id:"o-h-1",title:"待处理"},{id:"o-h-2",title:"待确认(业务员)"},{id:"o-h-3",title:"待确认(门店)"},{id:"o-h-4",title:"待安装"},{id:"o-h-5",title:"已安装"},{id:"o-h-6",title:"财审1"},{id:"o-h-7",title:"财审2"},{id:"o-h-8",title:"待结算"}]}),68===e[l].id&&(e[l].roles=[],e[l].roles[0]={title:" ",children:[{id:"o-"+e[l].id+"-1",title:"查询"},{id:"o-"+e[l].id+"-2",title:"导出"},{id:"o-"+e[l].id+"-3",title:"新增"},{id:"o-"+e[l].id+"-4",title:"删除"},{id:"o-"+e[l].id+"-5",title:"核销"}]}),69===e[l].id&&(e[l].roles=[],e[l].roles[0]={title:" ",children:[{id:"o-"+e[l].id+"-1",title:"接触绑定"},{id:"o-"+e[l].id+"-2",title:"更换绑定"}]}),70===e[l].id&&(e[l].roles=[],e[l].roles[0]={title:"安装单",children:[{id:"o-"+e[l].id+"-1",title:"查询"},{id:"o-"+e[l].id+"-2",title:"导出"}]},e[l].roles[1]={title:"营销单",children:[{id:"o-"+e[l].id+"h-1",title:"查询"},{id:"o-"+e[l].id+"h-2",title:"导出"}]}),92===e[l].id&&(e[l].roles=[],e[l].roles[0]={title:" ",children:[{id:"o-"+e[l].id+"-1",title:"查询"},{id:"o-"+e[l].id+"-2",title:"导出"},{id:"o-"+e[l].id+"-3",title:"解封同步"},{id:"o-"+e[l].id+"-4",title:"拉黑"},{id:"o-"+e[l].id+"-5",title:"拉白"},{id:"o-"+e[l].id+"-6",title:"改基本信息"},{id:"o-"+e[l].id+"-7",title:"修改绑定"},{id:"o-"+e[l].id+"-8",title:"门店信息"},{id:"o-"+e[l].id+"-9",title:"资产营收"},{id:"o-"+e[l].id+"-10",title:"安装订单"},{id:"o-"+e[l].id+"-11",title:"营销订单"},{id:"o-"+e[l].id+"-12",title:"用户评价"},{id:"o-"+e[l].id+"-13",title:"优惠卷"},{id:"o-"+e[l].id+"-14",title:"项目"},{id:"o-"+e[l].id+"-15",title:"抵扣卷"},{id:"o-"+e[l].id+"-16",title:"产品"},{id:"o-"+e[l].id+"-17",title:"动态"}]}),72===e[l].id&&(e[l].roles=[],e[l].roles[0]={title:" ",children:[{id:"o-"+e[l].id+"-1",title:"查询"},{id:"o-"+e[l].id+"-2",title:"导出"}]}),96===e[l].id&&(e[l].roles=[],e[l].roles[0]={title:"全部订单",children:[{id:"o-"+e[l].id+"-1",title:"查询"},{id:"o-"+e[l].id+"-2",title:"删除"},{id:"o-"+e[l].id+"-3",title:"新增"},{id:"o-"+e[l].id+"-4",title:"导出"},{id:"o-"+e[l].id+"-5",title:"修改"}]},e[l].roles[1]={title:"环节订单",children:[{id:"o-"+e[l].id+"-h-1",title:"待初审"},{id:"o-"+e[l].id+"-h-2",title:"待财审1"},{id:"o-"+e[l].id+"-h-3",title:"待财审2"},{id:"o-"+e[l].id+"-h-4",title:"待结算"}]}),97===e[l].id&&(e[l].roles=[],e[l].roles[0]={title:"全部订单",children:[{id:"o-"+e[l].id+"-1",title:"查询"},{id:"o-"+e[l].id+"-2",title:"删除"},{id:"o-"+e[l].id+"-3",title:"新增"},{id:"o-"+e[l].id+"-4",title:"导出"},{id:"o-"+e[l].id+"-5",title:"修改"}]},e[l].roles[1]={title:"环节订单",children:[{id:"o-"+e[l].id+"-h-1",title:"待初审"},{id:"o-"+e[l].id+"-h-2",title:"待财审1"},{id:"o-"+e[l].id+"-h-3",title:"待财审2"},{id:"o-"+e[l].id+"-h-5",title:"待结算"}]});return t}},watch:{dialogFormVisible:function(){this.resetTemp()}},created:function(){this.getRules()},destroyed:function(){},methods:{handleCheckedCitiesChange:function(t){},getRules:function(){var t=this;Object(n["f"])().then((function(i){t.ruleList=i.data}))},resetTemp:function(){this.temp={id:0,title:"",status:1,rules:""}},checkHandle:function(t){var i=this.$refs.tree.getHalfCheckedKeys().join(","),e=this.$refs.tree.getCheckedKeys().join(",");i.length&&e.length?this.temp.rules=i+","+e:i.length&&0===e.length?this.temp.rules=i:0===i.length&&e.length?this.temp.rules=e:this.temp.rules=""},handleCreate:function(){var t=this;this.dialogStatus="create",this.dialogFormVisible=!0,this.currentIndex=-1,this.loading=!1,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},handleUpdate:function(t){var i=this;this.loading=!0,this.dialogStatus="update",this.dialogFormVisible=!0;var e=this;Object(o["g"])(t).then((function(t){if(1===t.status){if(e.checkList=[],e.rolesList=[],e.temp.id=t.data.id,e.temp.title=t.data.title,e.temp.status=t.data.status,e.temp.rules=t.data.rules,null!==t.data.rules){for(var l=t.data.rules.split(","),d=[],n=0;n<l.length;n++)d[n]=parseInt(l[n]);e.checkList=d}if(null!==t.data.btn){for(var o=t.data.btn.split(","),r=[],a=0;a<o.length;a++)r[a]=o[a];e.rolesList=r}i.loading=!1}})),this.$nextTick((function(){i.$refs["dataForm"].clearValidate()}))},saveData:function(){var t=this;this.btnLoading=!0,this.$refs["dataForm"].validate((function(i){if(i){var e=t,l=t.temp;t.temp.rules=t.checkList.join(","),t.temp.btn=t.rolesList.join(","),Object(o["h"])(l).then((function(i){1===i.status?(l.id||(l.id=i.data.id),t.$emit("updateRow",l),e.dialogFormVisible=!1,e.$message.success(i.msg)):e.$message.error(i.msg),e.btnLoading=!1})).catch((function(i){t.btnLoading=!1}))}else t.btnLoading=!1}))}}},s=a,c=(e("9cad"),e("2877")),u=Object(c["a"])(s,l,d,!1,null,"0cdd8d16",null);i["default"]=u.exports},"9cad":function(t,i,e){"use strict";var l=e("2c15"),d=e.n(l);d.a},bd43:function(t,i,e){"use strict";e.d(i,"e",(function(){return d})),e.d(i,"f",(function(){return n})),e.d(i,"g",(function(){return o})),e.d(i,"h",(function(){return r})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return s})),e.d(i,"d",(function(){return c})),e.d(i,"b",(function(){return u}));var l=e("b775");function d(t){return Object(l["a"])({url:"/admin/rules/index",method:"post",data:t})}function n(){return Object(l["a"])({url:"/admin/rules/getLists",method:"post"})}function o(t){return Object(l["a"])({url:"/admin/rules/getinfo",method:"get",params:{id:t}})}function r(t){return Object(l["a"])({url:"/admin/rules/save",method:"post",data:t})}function a(t){return Object(l["a"])({url:"/admin/rules/del",method:"get",params:{id:t}})}function s(t,i,e){var d={val:t,field:i,value:e};return Object(l["a"])({url:"/admin/rules/change",method:"post",data:d})}function c(t){return Object(l["a"])({url:"/admin/rules/delall",method:"post",data:t})}function u(t){return Object(l["a"])({url:"/admin/rules/changeall",method:"post",data:t})}},f382:function(t,i,e){"use strict";e("ac6a");var l=e("ed08");function d(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pid",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"children",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=[];return t&&t.forEach((function(s){if(s[n]===i){null!==r&&(s=Object(l["g"])(s,r));var c=d(t,s[e],e,n,o,r);c.length&&(s[o]=c),a.push(s)}})),a}function n(t,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pid",d=[];return t&&t.forEach((function(o){if(o[e]===i){d.unshift(o[l]);var r=n(t,o[l],e,l);r.length&&(d=d.concat(r))}})),d}function o(t,i,e,d){return t&&t.map((function(t){t[i]===e?Object(l["g"])(t,d):o(t.children,i,e,d)})),t}var r={listToTreeMulti:d,getParentsId:n,upadteArr:o};i["a"]=r}}]);