(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16f555f2"],{"121a":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return l}));var n=a("b775");function i(){return Object(n["a"])({url:"/tools/CarTools/CarBrand",method:"get"})}function o(){return Object(n["a"])({url:"/tools/CarTools/getBrand",method:"get"})}function s(e){return Object(n["a"])({url:"/tools/CarTools/getSeries",method:"get",params:{brand_id:e}})}function l(e){return Object(n["a"])({url:"/tools/CarTools/getModel",method:"get",params:{series_id:e}})}},"20f0":function(e,t,a){},"7f78":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card"},[a("div",{staticClass:"app-container pageclass"},[a("div",{staticClass:"filter-container dn"},[a("el-form",{attrs:{inline:!0,model:e.listQuery}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"车主:"}},[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter()}},model:{value:e.listQuery.user,callback:function(t){e.$set(e.listQuery,"user",t)},expression:"listQuery.user"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"质保码:"}},[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter()}},model:{value:e.listQuery.guarantee_code,callback:function(t){e.$set(e.listQuery,"guarantee_code",t)},expression:"listQuery.guarantee_code"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"电话:"}},[a("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter()}},model:{value:e.listQuery.tel,callback:function(t){e.$set(e.listQuery,"tel",t)},expression:"listQuery.tel"}})],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"10px","text-align":"right","margin-right":"45px"}},[a("el-col",{attrs:{xs:24,sm:24,lg:24}},[a("el-tooltip",{attrs:{content:"搜索",placement:"top"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleFilter()}}},[e._v("搜索")])],1),e._v(" "),a("el-tooltip",{attrs:{content:"导出",placement:"top"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleDownload()}}},[e._v("下载")])],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"new-table"},e._l(e.list,(function(t,n){return a("div",{key:n,staticClass:"table_list"},[a("div",{staticClass:"list_name"},[a("div",{staticClass:"name_title"},[a("span",[e._v("产品：")]),e._v(" "),a("span",{staticClass:"title_span"},[e._v(e._s(t.product_title))])]),e._v(" "),a("div",{staticClass:"name_title"},[a("span",[e._v("车型：")]),e._v(" "),a("span",{staticClass:"title_span span_overflow"},[t.model?a("span",[e._v("\n                               "+e._s(t.model.carseries.series_name)+"\n                                  "+e._s(t.model.model_name)+"\n\n                                  ")]):e._e()])]),e._v(" "),a("div",{staticClass:"name_title"},[a("span",[e._v("车牌：")]),e._v(" "),a("span",{staticClass:"title_span"},[e._v(e._s(t.provincial)+e._s(t.plate_numer))])])]),e._v(" "),a("div",{staticClass:"list_name"},[a("div",{staticClass:"name_title"},[a("span",[e._v("车主姓名：")]),e._v(" "),a("span",{staticClass:"title_span"},[e._v(e._s(t.user))])]),e._v(" "),a("div",{staticClass:"name_title"},[a("span",[e._v("车主电话：")]),e._v(" "),a("span",{staticClass:"title_span"},[e._v(e._s(t.user_phone))])]),e._v(" "),a("div",{staticClass:"name_title"},[a("span",[e._v("车主地区：")]),e._v(" "),a("span",{staticClass:"title_span"},[e._v(e._s(t.user_address))])])]),e._v(" "),a("div",{staticClass:"list_name"},[a("div",{staticClass:"name_title"},[a("span",[e._v("安装门店：")]),e._v(" "),a("span",{staticClass:"title_span"},[e._v(e._s(t.shop_user))])]),e._v(" "),a("div",{staticClass:"name_title"},[a("span",[e._v("门店电话：")]),e._v(" "),a("span",{staticClass:"title_span"},[e._v(e._s(t.shop_phone))])]),e._v(" "),a("div",{staticClass:"name_title"},[a("span",[e._v("门店地区：")]),e._v(" "),a("span",{staticClass:"title_span"},[e._v(e._s(t.shop_address))])])]),e._v(" "),a("div",{staticClass:"list_name"},[a("div",{staticClass:"name_title"},[a("span",[e._v("有  效  期：")]),e._v(" "),a("span",{staticClass:"title_span"},[e._v(e._s(t.codeday)+"天")])]),e._v(" "),a("div",{staticClass:"name_title"},[a("span",[e._v("购买日期：")]),e._v(" "),a("span",{staticClass:"title_span"},[e._v(e._s(e._f("parseTime")(t.buytime)))])]),e._v(" "),a("div",{staticClass:"name_title"},[a("span",[e._v("质  保  码：")]),e._v(" "),a("span",{staticClass:"title_span"},[e._v(e._s(t.code))])])]),e._v(" "),a("div",{staticClass:"list_button"},[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){return e.handleUpdate(t)}}},[e._v("编辑\n                      ")]),e._v(" "),a("el-button",{attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(a){return e.handleDelete(n,t.id)}}},[e._v("删除")])],1)])})),0)]),e._v(" "),a("div",{staticClass:"pageclass"},[a("div",{staticClass:"pagination-container page"},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.psize,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"50%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"选择产品"}},[a("el-cascader",{ref:"product",attrs:{size:"mini",options:e.productTree,filterable:"",clearable:"",placeholder:"","change-on-select":""},on:{change:e.handelProduct},model:{value:e.form.product_all,callback:function(t){e.$set(e.form,"product_all",t)},expression:"form.product_all"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"质保码"}},[a("el-input",{model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"质保期"}},[a("el-input",{model:{value:e.form.codeday,callback:function(t){e.$set(e.form,"codeday",t)},expression:"form.codeday"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"车型"}},[a("el-cascader",{attrs:{size:"mini",props:e.props,filterable:"",clearable:""},model:{value:e.form.car_model,callback:function(t){e.$set(e.form,"car_model",t)},expression:"form.car_model"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"车牌"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.provincial,callback:function(t){e.$set(e.form,"provincial",t)},expression:"form.provincial"}},e._l(e.abbreviation,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"车牌号码"}},[a("el-input",{model:{value:e.form.plate_numer,callback:function(t){e.$set(e.form,"plate_numer",t)},expression:"form.plate_numer"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.form.user,callback:function(t){e.$set(e.form,"user",t)},expression:"form.user"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{model:{value:e.form.user_phone,callback:function(t){e.$set(e.form,"user_phone",t)},expression:"form.user_phone"}})],1),e._v(" "),a("el-form-item",{staticClass:"postInfo-container-item",attrs:{size:"mini",label:"地址:"}},[a("el-cascader",{ref:"elcascader",attrs:{size:"mini",clearable:"",options:e.cityoptions,"change-on-select":""},on:{"visible-change":e.elCascaderOnlick,"expand-change":e.elCascaderOnlick},model:{value:e.form.user_city_code,callback:function(t){e.$set(e.form,"user_city_code",t)},expression:"form.user_city_code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"店名"}},[a("el-input",{model:{value:e.form.shop_user,callback:function(t){e.$set(e.form,"shop_user",t)},expression:"form.shop_user"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{model:{value:e.form.shop_phone,callback:function(t){e.$set(e.form,"shop_phone",t)},expression:"form.shop_phone"}})],1),e._v(" "),a("el-form-item",{staticClass:"postInfo-container-item",attrs:{size:"mini",label:"地址:"}},[a("el-cascader",{ref:"elcascader",attrs:{size:"mini",clearable:"",options:e.cityoptions,"change-on-select":""},on:{"visible-change":e.elCascaderOnlick,"expand-change":e.elCascaderOnlick},model:{value:e.form.shop_city_code,callback:function(t){e.$set(e.form,"shop_city_code",t)},expression:"form.shop_city_code"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handelSave}},[e._v("确 定")])],1)],1)],1)},i=[],o=a("bd86"),s=(a("ac6a"),a("28a5"),a("7f7f"),a("121a")),l=a("b775");function r(e){return Object(l["a"])({url:"/admin/usercard/GetDataByList",method:"post",data:e})}function c(e){return Object(l["a"])({url:"/admin/usercard/GetDeleteById",method:"get",params:{id:e}})}function u(e){return Object(l["a"])({url:"/admin/usercard/GetDownload",method:"get",params:e})}function d(e){return Object(l["a"])({url:"/admin/usercard/PostSaveByData",method:"post",data:e})}var m,f=a("c4c8"),p=a("ed08"),_=a("c591"),v={name:"guaranteecard",data:function(){return{dialogVisible:!1,props:{lazy:!0,lazyLoad:function(e,t){var a=e.level;if(0===a&&Object(s["b"])().then((function(e){for(var a=e.data,n=[],i=0;i<a.length;i++)n.push({label:a[i].name,value:a[i].brandid});t(n)})),1===a&&Object(s["d"])(e.data.value).then((function(e){for(var a=e.data,n=[],i=0;i<a.length;i++)n.push({label:a[i].factory_name+" "+a[i].series_name,value:a[i].series_id});t(n)})),2===a&&Object(s["c"])(e.data.value).then((function(e){for(var n=e.data,i=[],o=0;o<n.length;o++)i.push({label:n[o].label,value:n[o].value,leaf:a>=2});t(i)})),3===a){var n=[];t(n)}}},total:1,list:[],form:{},abbreviation:[{id:"1",name:"京"},{id:"2",name:"津"},{id:"3",name:"沪"},{id:"4",name:"渝"},{id:"5",name:"豫"},{id:"6",name:"冀"},{id:"7",name:"云"},{id:"8",name:"辽"},{id:"9",name:"黑"},{id:"10",name:"湘"},{id:"11",name:"鲁"},{id:"12",name:"皖"},{id:"13",name:"新"},{id:"14",name:"苏"},{id:"15",name:"浙"},{id:"16",name:"赣"},{id:"17",name:"桂"},{id:"18",name:"鄂"},{id:"19",name:"晋"},{id:"20",name:"蒙"},{id:"21",name:"陕"},{id:"22",name:"闽"},{id:"23",name:"吉"},{id:"24",name:"粤"},{id:"25",name:"青"},{id:"26",name:"藏"},{id:"27",name:"宁"},{id:"28",name:"琼"},{id:"29",name:"港"},{id:"30",name:"澳"},{id:"31",name:"台"},{id:"32",name:"贵"},{id:"33",name:"川"}],listQuery:{page:1,limit:10,car_name:"",product:"",guarantee_code:"",startTime:"",tel:"",car_model:"",cityCode:""},productTree:[],cityoptions:[]}},created:function(){var e=this;Object(_["a"])().then((function(t){e.cityoptions=t.data})),Object(f["f"])().then((function(t){e.productTree=t.data})),this.fetchList()},methods:(m={handelProduct:function(e){var t=this;console.log(e),e.length>1&&Object(f["d"])(e[1]).then((function(e){console.log(e),t.form.codeday=e.data.quality_time}))},handelSave:function(){var e=this;console.log(this.form),d(this.form).then((function(t){console.log(t),e.dialogVisible=!1,e.$message.success("更新成功"),e.fetchList()}))},handleUpdate:function(e){console.log(e),this.form={};var t=e.product_all;if(console.log(t),null!==t&&t.constructor==String){t=t.split(",");var a=[];t.forEach((function(e){a.push(parseInt(e))})),t=a}var n=e.car_model;null!==n&&n.constructor==String&&(n=n.split(","),n.forEach((function(e){e=parseInt(e)})));var i=e.user_city_code;if(null!==i&&i.constructor==String){i=i.split(",");var o=[];i.forEach((function(e){o.push(parseInt(e))})),i=o}var s=e.shop_city_code;if(console.log(s),null!==s&&s.constructor==String){s=s.split(",");var l=[];s.forEach((function(e){l.push(parseInt(e))})),s=l}this.form=e,this.form.product_all=t,this.form.car_model=n,this.form.user_city_code=i,this.form.shop_city_code=s,this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1},handleDelete:function(e,t){var a=this,n=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.$set(n.list[e],"delete",!0),c(t).then((function(t){1===t.status?(n.list.splice(e,1),n.total=n.total-1,n.$notify.success(t.msg)):n.$notify.error(t.msg),n.$set(n.list[e],"delete",!1)})).catch((function(t){n.$set(n.list[e],"delete",!1)}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},fetchList:function(){var e=this;r(this.listQuery).then((function(t){console.log(t),e.list=t.data.data,e.total=t.data.total}))},elCascaderproduct:function(){var e=this;setTimeout((function(){document.querySelectorAll(".el-cascader-node__label").forEach((function(t){t.onclick=function(){this.previousElementSibling.click(),e.$refs.product.dropDownVisible=!1}})),document.querySelectorAll(".el-cascader-panel .el-radio").forEach((function(t){t.onclick=function(){e.$refs.product.dropDownVisible=!1}}))}),100)},elCascaderCar:function(){var e=this;setTimeout((function(){document.querySelectorAll(".el-cascader-node__label").forEach((function(t){t.onclick=function(){this.previousElementSibling.click(),e.$refs.car.dropDownVisible=!1}})),document.querySelectorAll(".el-cascader-panel .el-radio").forEach((function(t){t.onclick=function(){e.$refs.car.dropDownVisible=!1}}))}),100)},elCascaderOnlick:function(){var e=this;setTimeout((function(){document.querySelectorAll(".el-cascader-node__label").forEach((function(t){t.onclick=function(){this.previousElementSibling.click(),e.$refs.elcascader.dropDownVisible=!1}})),document.querySelectorAll(".el-cascader-panel .el-radio").forEach((function(t){t.onclick=function(){e.$refs.elcascader.dropDownVisible=!1}}))}),100)},handleSizeChange:function(e){this.listQuery.psize=e,this.fetchList()},handleCurrentChange:function(e){this.listQuery.page=e,this.fetchList()},handleDownload:function(){var e=this;this.listLoading=!0,u(this.listQuery).then((function(t){Promise.all([a.e("chunk-6e83591c"),a.e("chunk-5164a781"),a.e("chunk-5bdd67a2"),a.e("chunk-54b312fe")]).then(a.bind(null,"4bf8d")).then((function(a){console.log(a);var n=t.data.tHeader,i=t.data.filterVal,o=e.formatJson(t.data.data,i),s=new Date;s.setTime(s.getTime());var l=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate();a.export_json_to_excel({header:n,data:o,filename:"质保卡-"+l}),e.listLoading=!1,e.$message.success("下载成功")}))}))},formatJson:function(e,t){return e.map((function(e){return t.map((function(t){return"timestamp"===t?Object(p["i"])(e[t]):e[t]}))}))}},Object(o["a"])(m,"elCascaderCar",(function(){var e=this;setTimeout((function(){document.querySelectorAll(".el-cascader-node__label").forEach((function(t){t.onclick=function(){this.previousElementSibling.click(),e.$refs.car.dropDownVisible=!1}})),document.querySelectorAll(".el-cascader-panel .el-radio").forEach((function(t){t.onclick=function(){e.$refs.car.dropDownVisible=!1}}))}),100)})),Object(o["a"])(m,"handleFilter",(function(){this.listQuery.page=1,this.fetchList()})),m)},h=v,b=(a("dc1d"),a("2877")),y=Object(b["a"])(h,n,i,!1,null,"74ae7507",null);t["default"]=y.exports},c4c8:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"g",(function(){return o})),a.d(t,"h",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return c})),a.d(t,"k",(function(){return u})),a.d(t,"j",(function(){return d})),a.d(t,"i",(function(){return m})),a.d(t,"e",(function(){return f})),a.d(t,"f",(function(){return p}));var n=a("b775");function i(e){return Object(n["a"])({url:"/admin/ProductClass/GetDataByList",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/admin/ProductClass/PostDataByAdd",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/admin/ProductClass/PostDataByUpSort",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/admin/ProductClass/GetIdByDelete",method:"post",data:e})}function r(e){var t={id:e};return Object(n["a"])({url:"/admin/Product/GetInfoById/GetInfoById",method:"post",data:t})}function c(e){return Object(n["a"])({url:"/admin/ProductClass/GetDataByAll",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/admin/Product/GetDataByList",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/admin/Product/GetIdByDelete",method:"post",data:{id:e}})}function m(e){return Object(n["a"])({url:"/admin/Product/PostDataByAdd",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/admin/Product/GetDataByAll",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/admin/Product/GetProductByTree",method:"post",data:e})}},c591:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("b775");function i(){return Object(n["a"])({url:"/tools/CityTools/Cityadminlist",method:"post"})}},dc1d:function(e,t,a){"use strict";var n=a("20f0"),i=a.n(n);i.a}}]);